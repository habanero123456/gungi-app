(this["webpackJsonpgungi-app"]=this["webpackJsonpgungi-app"]||[]).push([[0],{23:function(e,t,n){},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);for(var s=n(0),o=n.n(s),c=n(11),r=n.n(c),a=(n(32),n(4)),i=(n(23),n(58)),l=n(60),u=n(8),h=n.n(u),f=n(1),p=Object(i.a)((function(e){return{paper:{position:"absolute",width:120,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,2,2),marginTop:250},paperM:{position:"absolute",width:120,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(1,2,1),margin:"-98px 0 0 5px"},content:{display:"flex",justifyContent:"center",flexDirection:"column",width:120},button1:{margin:5},ruleBookContainer:{width:458,height:458,backgroundColor:"#cccccc",position:"absolute"}}})),d=function(){var e=p(),t=Object(s.useContext)(S),n=t.modal,o=t.setModal,c=Object(s.useContext)(S),r=(c.turn,c.setTurn,Object(s.useContext)(S)),a=r.attack,i=r.setAttack,u=h()({minWidth:"769px"}),d="";d="".concat(u?e.paper:e.paperM);var b=function(e){o(0);var t={num:e,offense:a.offense,defense:a.defense};i(t)};return 1===n?Object(f.jsx)("div",{id:"modal",className:d,children:Object(f.jsxs)("div",{id:"content",className:e.content,children:[Object(f.jsx)(l.a,{variant:"contained",color:"secondary",className:e.button1,onClick:function(){return b(2)},children:"\u53d6\u308b"}),Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:e.button1,onClick:function(){return b(3)},children:"\u30c4\u30b1\u308b"}),Object(f.jsx)(l.a,{variant:"contained",className:e.button1,onClick:function(){return b(1)},children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})}):2===n?Object(f.jsx)("div",{id:"modal",className:d,children:Object(f.jsxs)("div",{id:"content",className:e.content,children:[Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:e.button1,onClick:function(){return b(3)},children:"\u30c4\u30b1\u308b"}),Object(f.jsx)(l.a,{variant:"contained",className:e.button1,onClick:function(){return b(1)},children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})}):3===n?Object(f.jsx)("div",{id:"modal",className:d,children:Object(f.jsxs)("div",{id:"content",className:e.content,children:[Object(f.jsx)(l.a,{variant:"contained",color:"secondary",className:e.button1,onClick:function(){return b(2)},children:"\u53d6\u308b"}),Object(f.jsx)(l.a,{variant:"contained",className:e.button1,onClick:function(){return b(1)},children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})}):null},b=function(){var e=p(),t=Object(s.useContext)(S),n=t.ruleBook;t.setRuleBook;return n?Object(f.jsx)("div",{className:e.ruleBookContainer}):null},v=Object(i.a)((function(e){return{container:{display:"flex",margin:"0 auto",width:900,flexDirection:"column"},topBar:{display:"flex",margin:"10px auto",alignItems:"space-around",justifyContent:"space-around",height:50,width:360},gameArea:{display:"flex",margin:"0 auto"},leftParamsArea:{display:"flex",justifyContent:"center",width:170},rightParamsArea:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",width:170},paramsArea:{height:200,width:160},board:{marginTop:1},button1:{width:120},containerM:{margin:"100px auto"},gameAreaM:{display:"flex",flexDirection:"column",alignItems:"center"},ownPieceArea:{display:"flex",margin:20},paramsAreaM:{},boardM:{marginTop:1}}})),j=function(){var e=v(),t=h()({minWidth:"769px"}),n=Object(s.useContext)(S),o=n.ruleBook,c=n.setRuleBook,r=Object(s.useContext)(S),a=(r.phase,r.setPhase),i=Object(s.useContext)(S),u=(i.pieces,i.setPieces),p=new Array(89).fill({type:-1,whose:0,level:0});return t?Object(f.jsxs)("div",{className:e.container,children:[Object(f.jsxs)("div",{className:e.topBar,children:[Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:e.button1,onClick:function(){return a(0),void u(p)},children:"\u306f\u3058\u3081\u304b\u3089"}),Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:e.button1,onClick:function(){c(!o)},children:"\u30eb\u30fc\u30eb"})]}),Object(f.jsxs)("div",{className:e.gameArea,children:[Object(f.jsxs)("div",{className:e.leftParamsArea,children:[Object(f.jsx)(k,{isWhite:!1}),Object(f.jsx)(d,{})]}),Object(f.jsxs)("div",{className:e.board,children:[Object(f.jsx)(b,{}),Object(f.jsx)(m,{})]}),Object(f.jsxs)("div",{className:e.rightParamsArea,children:[Object(f.jsx)("div",{className:e.paramsArea,children:Object(f.jsx)(P,{})}),Object(f.jsx)(k,{isWhite:!0})]})]})]}):Object(f.jsx)("div",{className:e.containerM,children:Object(f.jsxs)("div",{className:e.gameAreaM,children:[Object(f.jsx)("div",{className:e.boardM,children:Object(f.jsx)(m,{})}),Object(f.jsxs)("div",{className:e.ownPieceArea,children:[Object(f.jsx)(k,{isWhite:!0}),Object(f.jsxs)("div",{className:e.paramsAreaM,children:[Object(f.jsx)(P,{}),Object(f.jsx)(d,{})]}),Object(f.jsx)(k,{isWhite:!1})]})]})})},w=Object(i.a)((function(e){return{container:{display:"flex",margin:0,width:"459px"},columnContainer:{flexDirection:"column",display:"flex"},rowContainer:{marginTop:-1,marginBottom:2,height:50},containerM:{display:"flex",margin:0,width:"351px"},columnContainerM:{flexDirection:"column",display:"flex"},rowContainerM:{marginTop:-1,marginBottom:2,height:38}}})),m=function(){var e=w(),t=function(e,t){return Object(f.jsx)(C,{column:e,row:t})},n=[1,2,3,4,5,6,7,8,9];return h()({minWidth:"769px"})?Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)("div",{className:e.columnContainer,children:n.map((function(s){return Object(f.jsx)("div",{className:e.rowContainer,children:n.map((function(e){return t(s,e)}))})}))})}):Object(f.jsx)("div",{className:e.containerM,children:Object(f.jsx)("div",{className:e.columnContainerM,children:n.map((function(s){return Object(f.jsx)("div",{className:e.rowContainerM,children:n.map((function(e){return t(s,e)}))})}))})})},x=n(5),O=n(17),y=Object(i.a)((function(e){return{square:Object(O.a)({width:52,height:52,borderWidth:1,borderColor:"black",boxSizing:"border-box",marginLeft:-1,backgroundColor:"#F8BE75",borderSpacing:0,borderCollapse:"collapse"},"boxSizing","border-box"),squareM:Object(O.a)({width:40,height:40,borderWidth:1,borderColor:"black",boxSizing:"border-box",marginLeft:-1,backgroundColor:"#F8BE75",borderSpacing:0,borderCollapse:"collapse"},"boxSizing","border-box"),text:{fontSize:24},piece:{backgroundSize:"contain",margin:0,borderColor:"black",borderWidth:1,width:50,height:50},pieceM:{backgroundSize:"contain",margin:0,borderColor:"black",borderWidth:1,width:38,height:38},selected:{backgroundColor:"#D0D0D0"},canMove:{backgroundColor:"#f5a38e"},image:{}}})),C=function(e){var t=y(),n=Object(s.useContext)(S),o=n.pieces,c=n.setPieces,r=Object(s.useContext)(S),a=r.turn,i=r.setTurn,l=Object(s.useContext)(S),u=l.select,p=l.setSelect,d=Object(s.useContext)(S),b=d.clickFlag,v=d.setClickFlag,j=Object(s.useContext)(S),w=j.canMove,m=j.setCanMove,O=Object(s.useContext)(S),C=(O.modal,O.setModal),g=Object(s.useContext)(S),k=g.attack,N=g.setAttack,A=Object(s.useContext)(S),M=A.whitePieces,P=A.setWhitePieces,W=Object(s.useContext)(S),B=W.blackPieces,F=W.setBlackPieces,D=Object(s.useContext)(S),T=D.phase,q=D.setPhase,K=Object(s.useContext)(S),z=(K.winner,K.setWinner),I=Object(s.useContext)(S),E=I.kifu,L=I.setKifu,R=Object(s.useContext)(S),Y=(R.yomifu,R.setYomifu),J=Object(s.useContext)(S),G=(J.click,J.setClick),H=Object(s.useContext)(S),Q=H.firstArata,U=H.setFirstArata,V=Object(s.useContext)(S),X=(V.bouCheck,V.setBouCheck),Z=Object(s.useContext)(S),$=(Z.curKifu,Z.setCurKifu),_=10*(e.column-1)+9-e.row,ee=Array.from(o),te=ee[_],ne=b,se=h()({minWidth:"769px"}),oe="";oe="".concat(se?t.square:t.squareM);var ce="";ce="".concat(se?t.piece:t.pieceM),u.num===_&&(ce+=" ".concat(t.selected)),w.includes(_)&&(ce+=" ".concat(t.canMove));var re=1===a?2:1,ae=_%10,ie=(_-ae)/10,le=["\u5e2b","\u5927","\u4e2d","\u5c0f","\u5175","\u4f8d","\u5fcd","\u99ac","\u5f13","\u7826","\u69cd","\u8b00","\u7832","\u7b52"],ue=function(e){var t=Array.from(E);t.push(e),L(t)},he=function(){var e=!1,t=!1,n=ee.reduce((function(n,s,o,c){var r=-1,a=-1;return e||(1===s.whose&&11===s.type&&(console.log(o),r=(o-o%10)/10,e=!0,n[0]=r),o===c.length-1&&n.push(r)),t||(2===s.whose&&11===s.type&&(console.log(o),a=(o-o%10)/10,t=!0,n[1]=a),o===c.length-1&&n.push(a)),n}),[]);X(n)};Object(s.useEffect)((function(){if(k.defense===_){1===k.num&&(i(1===a?2:1),v(!b),N({num:0,piece:-1}));var e,t=1,n=1;if(k.offense<90&&(t=ee[k.offense].level,n=ee[k.defense].level),2===k.num&&(3===t?t===n?(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level,under:ee[k.defense].under}),ee.splice(k.offense,1,ee[k.offense].under)):t-n===1?(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level-1,under:ee[k.defense].under}),ee.splice(k.offense,1,ee[k.offense].under)):(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level-2}),ee.splice(k.offense,1,ee[k.offense].under)):2===t?t===n?(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level,under:ee[k.defense].under}),ee.splice(k.offense,1,ee[k.offense].under)):(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level-1}),ee.splice(k.offense,1,ee[k.offense].under)):(ee.splice(k.defense,1,{type:ee[k.offense].type,whose:re,level:ee[k.offense].level}),ee.splice(k.offense,1,{type:0,whose:0,level:0})),ue(ee),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type])),v(!b),he()),3===k.num)k.offense>=90?(e={type:k.type,whose:re,level:ee[k.defense].level+1,under:ee[k.defense]},ee.splice(k.defense,1,e)):(3===t&&(e=t-n===1?{type:ee[k.offense].type,whose:re,level:ee[k.offense].level,under:ee[k.defense]}:{type:ee[k.offense].type,whose:re,level:ee[k.offense].level-1,under:ee[k.defense]}),2===t&&(e=t-n===1?{type:ee[k.offense].type,whose:re,level:ee[k.offense].level,under:ee[k.defense]}:{type:ee[k.offense].type,whose:re,level:ee[k.offense].level+1,under:ee[k.defense]}),1===t&&(e={type:ee[k.offense].type,whose:re,level:ee[k.offense].level+1,under:ee[k.defense]}),ee.splice(k.defense,1,e),t>=2?ee.splice(k.offense,1,ee[k.offense].under):ee.splice(k.offense,1,{type:-1,whose:0,level:0})),ue(ee),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type])),v(!b),he();c(ee),p({num:-1,type:-1,level:0})}}),[k]);var fe=1===te.level?0:2===te.level?1===te.under.whose?1:2:3===te.level?1===te.under.whose?1===te.under.under.whose?3:4:1===te.under.under.whose?5:6:void 0,pe="piece".concat(te.type,"-").concat(te.whose,"-").concat(fe),de=function(){if(3===T){if(G(ee[_]),!1===ne?te.whose===a&&(v(!ne),p({num:_,type:ee[_].type,level:ee[_].level}),function(){var e=function(e,t){if(1===t){var n=e[0],s=e[1];if(ae+n>=0&&ae+n<=9&&ie+s>=0&&ie+s<=9)return 10*(ie+s)+ae+n}else{var o=e[0],c=-e[1];if(ae+o>=0&&ae+o<=9&&ie+c>=0&&ie+c<=9)return 10*(ie+c)+ae+o}},t=function(e){return e>=0&&e<=88&&0===ee[e].whose},n=[];switch(te.type){case 0:1===te.level&&(n=[e([0,-1],te.whose),e([0,1],te.whose),e([1,0],te.whose),e([-1,0],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose),e([1,1],te.whose),e([-1,1],te.whose)]);break;case 1:if(0!==te.level){for(var s=1;s<=9;s++){var o=e([s,0],te.whose);if(n.push(o),!t(o))break}for(var c=1;c<=9;c++){var r=e([-c,0],te.whose);if(n.push(r),!t(r))break}for(var i=1;i<=9;i++){var l=e([0,i],te.whose);if(n.push(l),!t(l))break}for(var u=1;u<=9;u++){var h=e([0,-u],te.whose);if(n.push(h),!t(h))break}te.level>=2&&(n.push(e([1,1],te.whose)),n.push(e([1,-1],te.whose)),n.push(e([-1,1],te.whose)),n.push(e([-1,-1],te.whose)))}break;case 2:if(0!==te.level){for(var f=1;f<=9;f++){var p=e([f,f],te.whose);if(n.push(p),!t(p))break}for(var d=1;d<=9;d++){var b=e([d,-d],te.whose);if(n.push(b),!t(b))break}for(var v=1;v<=9;v++){var j=e([-v,v],te.whose);if(n.push(j),!t(j))break}for(var w=1;w<=9;w++){var O=e([-w,-w],te.whose);if(n.push(O),!t(O))break}te.level>=2&&(n.push(e([0,1],te.whose)),n.push(e([0,-1],te.whose)),n.push(e([1,0],te.whose)),n.push(e([-1,0],te.whose)))}break;case 3:1===te.level?n=[e([0,-1],te.whose),e([0,1],te.whose),e([1,0],te.whose),e([-1,0],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose)]:te.level>=2&&(t((n=[e([1,0],te.whose),e([0,1],te.whose),e([0,-1],te.whose),e([-1,0],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose)])[0])&&n.push(e([2,0],te.whose)),t(n[2])&&n.push(e([0,-2],te.whose)),t(n[3])&&n.push(e([-2,0],te.whose)));break;case 4:1===te.level?n=[e([0,-1],te.whose),e([0,1],te.whose)]:te.level>=2&&(t((n=[e([0,-1],te.whose),e([0,1],te.whose)])[0])&&n.push(e([0,-2],te.whose)),t(n[1])&&n.push(e([0,2],te.whose)));break;case 5:1===te.level?n=[e([1,1],te.whose),e([1,-1],te.whose),e([-1,1],te.whose),e([-1,-1],te.whose),e([0,-1],te.whose)]:te.level>=2&&(t((n=[e([1,1],te.whose),e([1,-1],te.whose),e([-1,1],te.whose),e([-1,-1],te.whose),e([0,-1],te.whose)])[0])&&n.push(e([2,2],te.whose)),t(n[1])&&n.push(e([2,-2],te.whose)),t(n[2])&&n.push(e([-2,2],te.whose)),t(n[3])&&n.push(e([-2,-2],te.whose)));break;case 6:1===te.level?n=[e([0,-1],te.whose),e([0,1],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose)]:te.level>=2&&(t((n=[e([0,-1],te.whose),e([0,1],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose),e([1,0],te.whose),e([-1,0],te.whose)])[0])&&n.push(e([0,-2],te.whose)),t(n[2])&&n.push(e([2,-2],te.whose)),t(n[3])&&n.push(e([-2,-2],te.whose)));break;case 7:1===te.level?n=[e([0,1],te.whose),e([0,-1],te.whose),e([1,0],te.whose),e([-1,0],te.whose)]:te.level>=2&&(t((n=[e([0,1],te.whose),e([0,-1],te.whose),e([1,0],te.whose),e([-1,0],te.whose)])[0])&&n.push(e([0,2],te.whose)),t(n[1])&&n.push(e([0,-2],te.whose)),t(n[2])&&n.push(e([2,0],te.whose)),t(n[3])&&n.push(e([-2,0],te.whose)));break;case 8:1===te.level?n=[e([1,2],te.whose),e([1,-2],te.whose),e([-1,2],te.whose),e([-1,-2],te.whose),e([2,1],te.whose),e([2,-1],te.whose),e([-2,1],te.whose),e([-2,-1],te.whose)]:te.level>=2&&(n=[e([1,2],te.whose),e([1,-2],te.whose),e([-1,2],te.whose),e([-1,-2],te.whose),e([2,1],te.whose),e([2,-1],te.whose),e([-2,1],te.whose),e([-2,-1],te.whose),e([1,0],te.whose),e([-1,0],te.whose),e([0,1],te.whose),e([0,-1],te.whose)]);break;case 9:(1===te.level||te.level>=2)&&(n=[e([0,-1],te.whose),e([0,1],te.whose),e([1,0],te.whose),e([-1,0],te.whose),e([1,-1],te.whose),e([-1,-1],te.whose),e([1,1],te.whose),e([-1,1],te.whose)]);break;case 10:if(0!==te.level){for(var y=1;y<=9;y++){var C=e([0,y],te.whose);if(n.push(C),!t(C))break}for(var g=1;g<=9;g++){var k=e([0,-g],te.whose);if(n.push(k),!t(k))break}}te.level>=2&&(n.push(e([1,0],te.whose)),n.push(e([-1,0],te.whose)));break;case 11:1===te.level&&(n=[e([0,-1],te.whose),e([1,0],te.whose),e([-1,0],te.whose)]);break;case 12:1===te.level&&(n=[e([0,-1],te.whose),e([1,1],te.whose),e([-1,1],te.whose),e([1,-2],te.whose),e([-1,-2],te.whose)]);break;case 13:1===te.level&&(n=[e([0,1],te.whose),e([1,0],te.whose),e([-1,0],te.whose),e([1,-2],te.whose),e([-1,-2],te.whose)])}var N=function(e){var t=ee.reduce((function(t,n,s,o){for(var c=0;c<e.length;c++)e[c]===s&&t.push({type:n.type,whose:n.whose,index:s});return t}),[]).filter((function(e){return 0!==e.type||e.whose!==a||void 0})).map((function(e){return e.index}));return t}(n),A=function(e){var t=[];return t=[0,12,13].includes(te.type)?ee.reduce((function(t,n,s,o){for(var c=0;c<e.length;c++)e[c]===s&&t.push({type:n.type,whose:n.whose,index:s});return t}),[]).filter((function(e){return e.whose!==a})).map((function(e){return e.index})):e,t}(N),M=function(e){var t=ee.reduce((function(t,n,s,o){for(var c=0;c<e.length;c++)e[c]===s&&t.push(Object(x.a)(Object(x.a)({},n),{},{index:s}));return t}),[]).filter((function(e){if(0===te.type||12===te.type||13===te.type)return!0;if(9===te.type){if(3===te.level){if(te.level!==e.level)return!0}else if(te.level>=e.level)return!0}else if(3!==te.whose){if(te.level>=e.level)return!0}else if(te.whose!==e.whose){if(te.level>=e.level)return!0}else if(te.level>e.level)return!0})).map((function(e){return e.index}));return t}(A);m(M)}()):w.includes(_)||(v(!b),p({num:-1,type:-1,level:0}),m([])),w.includes(_)){if(0===ee[_].whose){if(90===u.num){var e=Array.from(M),t=e.indexOf(u.type);e.splice(t,1),P(e),ee.splice(_,1,{type:u.type,whose:a,level:1}),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type],"-\u65b0"))}else if(91===u.num){var n=Array.from(B),s=n.indexOf(u.type);n.splice(s,1),F(n),ee.splice(_,1,{type:u.type,whose:a,level:1}),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type],"-\u65b0"))}else 1===ee[u.num].level?(ee.splice(_,1,{type:u.type,whose:a,level:u.level}),ee.splice(u.num,1,{type:-1,whose:0,level:0})):ee[u.num].level>=2&&(ee.splice(_,1,{type:u.type,whose:a,level:1}),ee.splice(u.num,1,ee[u.num].under)),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type]));v(!b),ue(ee),he()}else ee[_].whose===a&&(u.num>=90?N({num:3,offense:u.num,defense:_,type:u.type}):u.level>=ee[_].level&&(C(2),N({num:-1,offense:u.num,defense:_})));ee[_].whose===re&&(0===ee[_].type?(3===u.level?(ee.splice(_,1,{type:u.type,whose:a,level:2,under:ee[_]}),ee.splice(u.num,1,ee[u.num].under)):2===u.level?(ee.splice(_,1,{type:u.type,whose:a,level:1}),ee.splice(u.num,1,ee[u.num].under)):(ee.splice(_,1,{type:u.type,whose:a,level:1}),ee.splice(u.num,1,{type:0,whose:0,level:0})),ue(ee),z(a),$(E.length),q(4)):9===u.type?(C(2),N({num:-1,offense:u.num,defense:_})):0===u.type||9===u.type||u.type>10?(C(3),N({num:-1,offense:u.num,defense:_})):3!==u.level?u.level>=ee[_].level&&(C(1),N({num:-1,offense:u.num,defense:_})):3===ee[_].level?(C(3),N({num:-1,offense:u.num,defense:_})):(C(1),N({num:-1,offense:u.num,defense:_}))),c(ee),p({num:-1,type:-1,level:0}),m([]),i(re)}}else if(1===T||2===T){if(w.includes(_))if(0===ee[_].whose){if(90===u.num){var o=Array.from(M),r=o.indexOf(u.type);o.splice(r,1),P(o),ee.splice(_,1,{type:u.type,whose:a,level:1});for(var l=[],h=0;h<3;h++)for(var f=0;f<9;f++)l.push(10*h+f);!1===Q?(p({num:91,type:0,level:1}),m(l),U(!0)):(p({num:-1,type:-1,level:0}),m([])),v(!b),c(ee),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type],"-\u65b0")),ue(ee),1===T&&i(re)}else if(91===u.num){var d=Array.from(B),j=d.indexOf(u.type);d.splice(j,1),F(d),ee.splice(_,1,{type:u.type,whose:a,level:1}),v(!b),c(ee),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type],"-\u65b0")),ue(ee),p({num:-1,type:-1,level:0}),m([]),1===T&&i(re)}}else if(ee[_].whose===a){if(90===u.num){var O=Array.from(M),y=O.indexOf(u.type);O.splice(y,1),P(O);var g={};te.level<3&&(g={type:u.type,whose:a,level:u.level+1,under:te}),ee.splice(_,1,g)}else if(91===u.num){var k=Array.from(B),A=k.indexOf(u.type);k.splice(A,1),F(k);var S={};te.level<3&&(S={type:u.type,whose:a,level:u.level+1,under:te}),ee.splice(_,1,S)}v(!b),c(ee),Y("".concat(ae+1,"-").concat(ie+1,"-").concat(ee[_].level,"-").concat(le[ee[_].type],"-\u65b0")),ue(ee),p({num:-1,type:-1,level:0}),m([]),1===T&&i(re)}console.log(Q)}console.log(Object(x.a)(Object(x.a)({},ee[_]),{},{thisNum:_,params:pe}))};return Object(f.jsx)("button",{className:oe,onClick:function(){de()},children:Object(f.jsx)("div",{className:ce,style:{backgroundImage:"url(".concat("/gungi-app","/images/").concat(pe,".png)")}})})},g=Object(i.a)((function(e){return{squareContainer:{padding:0,margin:"0 auto",width:93},squareContainerSub:{height:150,backgroundColor:"#F8BE75",border:"1px solid #333",display:"flex",flexWrap:"wrap",flexDirection:"column"}}})),k=function(e){var t=g(),n=Object(s.useContext)(S),o=n.whitePieces,c=(n.setWhitePieces,Object(s.useContext)(S)),r=c.blackPieces,a=(c.setBlackPieces,Array.from(o).filter((function(e,t,n){return n.indexOf(e)===t}))),i=Array.from(r).filter((function(e,t,n){return n.indexOf(e)===t}));return Object(f.jsx)("div",{className:t.squareContainer,children:e.isWhite?Object(f.jsx)("div",{className:t.squareContainerSub,children:a.map((function(t){return Object(f.jsx)(A,{isWhite:e.isWhite,index:t})}))}):Object(f.jsx)("div",{className:t.squareContainerSub,children:i.map((function(t){return Object(f.jsx)(A,{isWhite:e.isWhite,index:t})}))})})},N=Object(i.a)((function(e){return{container:{margin:0,width:"50px"},square:{width:30,height:30,borderWidth:0,backgroundColor:"#F8BE75"},piece:{backgroundSize:"contain",borderWidth:0,width:30,height:30},selected:{backgroundColor:"#D0D0D0"}}})),A=function(e){var t,n=N(),o=Object(s.useContext)(S),c=o.whitePieces,r=(o.setWhitePieces,Object(s.useContext)(S)),a=r.blackPieces,i=(r.setBlackPieces,Object(s.useContext)(S)),l=i.pieces,u=(i.setPieces,Object(s.useContext)(S)),h=u.turn,p=(u.setTurn,Object(s.useContext)(S)),d=p.select,b=p.setSelect,v=Object(s.useContext)(S),j=v.clickFlag,w=v.setClickFlag,m=Object(s.useContext)(S),O=(m.canMove,m.setCanMove),y=Object(s.useContext)(S),C=(y.modal,y.setModal,Object(s.useContext)(S)),g=(C.attack,C.setAttack,Object(s.useContext)(S)),k=g.phase,A=(g.setPhase,Object(s.useContext)(S)),M=(A.click,A.setlick,Object(s.useContext)(S)),P=M.bouCheck,W=(M.setBouCheck,e.index);t=e.isWhite?1:2;var B,F="".concat(n.piece);d.type===W&&d.num===89+t&&(F+=" ".concat(n.selected)),B=e.isWhite?Array.from(c):Array.from(a);for(var D,T=0,q=0;q<B.length;++q)B[q]==W&&T++;D=1===T?0:2===T?1===t?1:2:3===T?1===t?3:6:7;var K="piece".concat(e.index,"-").concat(t,"-").concat(D),z=Array.from(l),I=1===h?2:1,E=function(e){return e.filter((function(e){if(0!==e.type&&e.whose!==I&&3!==e.level)return!0})).map((function(e){return e.index}))},L=function(){1===k||2===k?!1===j?t===h&&(w(!j),b({num:t+89,type:W,level:1}),function(){var e=[];if(1===t)if(11===W)for(var n=0;n<9;n++)e.push(Object(x.a)(Object(x.a)({},z[80+n]),{},{index:80+n}));else for(var s=6;s<9;s++)for(var o=0;o<9;o++)e.push(Object(x.a)(Object(x.a)({},z[10*s+o]),{},{index:10*s+o}));if(2===t)if(11===W)for(var c=0;c<9;c++)e.push(Object(x.a)(Object(x.a)({},z[c]),{},{index:c}));else for(var r=0;r<3;r++)for(var a=0;a<9;a++)e.push(Object(x.a)(Object(x.a)({},z[10*r+a]),{},{index:10*r+a}));var i=E(e);O(i)}()):d.num===t+89&&(w(!j),b({num:-1,type:-1,level:0}),O([])):3===k&&(console.log(P),!1===j?t===h&&(w(!j),b({num:t+89,type:W,level:1}),function(){var e=[],n=6;if(P[0]<6&&P[0]>0&&(n=P[0]),1===t)for(var s=n;s<9;s++)for(var o=0;o<9;o++)e.push(Object(x.a)(Object(x.a)({},z[10*s+o]),{},{index:10*s+o}));var c=3;if(P[1]>=3&&(c=P[1]+1),2===t)for(var r=0;r<c;r++)for(var a=0;a<9;a++)e.push(Object(x.a)(Object(x.a)({},z[10*r+a]),{},{index:10*r+a}));var i=E(e);O(i)}()):d.num===t+89&&(w(!j),b({num:-1,type:-1,level:0}),O([])))};return Object(f.jsx)("button",{className:n.square,onClick:function(){L()},children:Object(f.jsx)("div",{className:F,style:{backgroundImage:"url(".concat("/gungi-app","/images/").concat(K,".png)")}})})},M=Object(i.a)((function(e){return{paramsContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:160},button1:{marginBottom:10,width:160},button1M:{margin:"0 10px 10px 10px",padding:"6px 10px",width:140},bunttonContainer:{},button2:{marginBottom:10},button2M:{marginBottom:10}}})),P=function(e){var t=M(),n=Object(s.useContext)(S),o=n.phase,c=n.setPhase,r=Object(s.useContext)(S),a=(r.select,r.setSelect),i=Object(s.useContext)(S),u=(i.canMove,i.setCanMove),p=Object(s.useContext)(S),d=(p.whitePieces,p.setWhitePieces),b=Object(s.useContext)(S),v=(b.blackPieces,b.setBlackPieces),j=Object(s.useContext)(S),w=(j.clickFlag,j.setClickFlag),m=Object(s.useContext)(S),x=m.turn,O=m.setTurn,y=Object(s.useContext)(S),C=y.pieces,g=y.setPieces,k=Object(s.useContext)(S),N=k.winner,A=(k.setWinner,Object(s.useContext)(S)),P=A.kifu,W=A.setKifu,B=Object(s.useContext)(S),F=B.yomifu,D=B.setYomifu,T=Object(s.useContext)(S),q=T.click,K=(T.setClick,Object(s.useContext)(S)),z=(K.bouCheck,K.setBouCheck),I=Object(s.useContext)(S),E=I.curKifu,L=I.setCurKifu,R=h()({minWidth:"769px"}),Y="";Y="".concat(R?t.button1:t.button1M);var J="";J="".concat(R?t.button2:t.button2M);var G=["\u5e2b","\u5927","\u4e2d","\u5c0f","\u5175","\u4f8d","\u5fcd","\u99ac","\u5f13","\u7826","\u69cd","\u8b00","\u7832","\u7b52"],H="",Q="",U="";1===q.level&&(H="".concat(G[q.type])),2===q.level&&(H="\u4e0a\u6bb5\uff1a".concat(G[q.type]),Q="\u4e0b\u6bb5\uff1a".concat(G[q.under.type])),3===q.level&&(H="\u4e0a\u6bb5\uff1a".concat(G[q.type]),Q="\u4e2d\u6bb5\uff1a".concat(G[q.under.type]),U="\u4e0b\u6bb5\uff1a".concat(G[q.under.under.type]));var V=function(){var e=new Array(89).fill({type:-1,whose:0,level:0}),t=function(t,n,s,o,c){var r=8-t%10,a=10*(8-(t-(8-r))/10)+r;1===s&&(e.splice(t,1,{type:n,whose:1,level:1}),e.splice(a,1,{type:n,whose:2,level:1})),2===s&&(e.splice(t,1,{type:n,whose:1,level:2,under:{type:o,whose:1,level:1}}),e.splice(a,1,{type:n,whose:2,level:2,under:{type:o,whose:2,level:1}})),3===s&&(e.splice(t,1,{type:n,whose:1,level:3,under:{type:o,whose:1,level:2,under:{type:c,whose:1,level:1}}}),e.splice(a,1,{type:n,whose:2,level:3,under:{type:o,whose:2,level:2,under:{type:c,whose:2,level:1}}}))};return t(84,0,1),t(74,12,1),t(64,6,1),t(63,4,1),t(65,4,1),t(62,7,1),t(66,7,1),t(61,3,1),t(67,3,1),t(80,11,1),t(73,1,2,10),t(75,2,2,10),t(82,8,3,5,9),t(86,8,3,5,9),e},X=function(){for(var e=new Array(89).fill({type:-1,whose:0,level:0}),t=new Array(22),n=0;n<14;n++)t[n]=n;for(var s=3;s<11;s++)t[s+14-3]=s;t.push(4),t.push(4),t.push(10),t.sort((function(e,t){return e-t}));for(var o=new Array(22),r=0;r<14;r++)o[r]=r;for(var i=3;i<11;i++)o[i+14-3]=i;o.push(4),o.push(4),o.push(10),o.sort((function(e,t){return t-e})),c(1),a({num:90,type:0,level:1});for(var l=[],h=6;h<9;h++)for(var f=0;f<9;f++)l.push(10*h+f);g(e),D([]),w(!1),u(l),d(t),v(o),O(1),W([e])},Z=function(e){return 1===e?2:1}(x),$=function(){var e=o;2===o&&O(Z),c(e+1),function(){var e=C.filter((function(e){return 1===e.whose})),t=C.filter((function(e){return 2===e.whose})),n=e.some((function(e){return 11===e.type})),s=t.some((function(e){return 11===e.type}));z([n,s])}()},_=function(){c(3),D([]),g(V()),d([4,4,6,11,13]),v([4,4,6,11,13]),w(!1),O(1),W([V()])},ee=function(e){if(!0===e){var t=E;L(t-1),g(P[t-1])}if(!1===e){var n=E;L(n+1),g(P[n+1])}};if(0===o)return Object(f.jsxs)("div",{className:t.paramsContainer,children:[Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:Y,onClick:function(){return X()},children:"\u59cb\u3081\u308b"}),Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:Y,onClick:function(){return _()},children:"\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8"})]});if(1===o||2===o){var te,ne="".concat(P.length);return te=Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:Y,onClick:function(){return $()},children:"\u6e08\u307f"}),Object(f.jsxs)("div",{className:t.paramsContainer,children:[te,Object(f.jsxs)("div",{children:[ne,"\u624b\u76ee"]}),Object(f.jsx)("div",{children:F})]})}if(3===o){var se="".concat(P.length),oe="";return oe+=1===x?"\u767d":"\u9ed2",Object(f.jsxs)("div",{className:t.paramsContainer,children:[Object(f.jsxs)("div",{children:[oe,"\u756a"]}),Object(f.jsxs)("div",{children:[se,"\u624b\u76ee"]}),Object(f.jsx)("div",{children:F}),Object(f.jsx)("div",{children:H}),Object(f.jsx)("div",{children:Q}),Object(f.jsx)("div",{children:U})]})}if(4===o){var ce="".concat(E),re="";re=1===N?"\u767d":"\u9ed2";var ae="";ae=E>0?Object(f.jsx)(l.a,{variant:"contained",className:J,color:"primary",onClick:function(){return ee(!0)},children:"\u2190"}):Object(f.jsx)(l.a,{variant:"contained",className:J,children:"\u2190"});var ie="";return ie=E<P.length-1?Object(f.jsx)(l.a,{variant:"contained",className:J,color:"primary",onClick:function(){return ee(!1)},children:"\u2192"}):Object(f.jsx)(l.a,{variant:"contained",className:J,children:"\u2192"}),Object(f.jsxs)("div",{className:t.paramsContainer,children:[Object(f.jsxs)("div",{children:[ce,"\u624b\u76ee"]}),Object(f.jsxs)("div",{children:["\u52dd\u8005 :\u3000",re]}),Object(f.jsxs)("div",{className:t.bunttonContainer,children:[ae,ie]}),Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:Y,onClick:function(){return X()},children:"\u518d\u6226"}),Object(f.jsx)(l.a,{variant:"contained",color:"primary",className:Y,onClick:function(){return _()},children:"\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8"})]})}return null},S=Object(s.createContext)(),W=new Array(89).fill({type:-1,whose:0,level:0}),B=new Array(22),F=0;F<14;F++)B[F]=F;for(var D=3;D<11;D++)B[D+14-3]=D;B.push(4),B.push(4),B.push(10),B.sort((function(e,t){return e-t}));for(var T=new Array(22),q=0;q<14;q++)T[q]=q;for(var K=3;K<11;K++)T[K+14-3]=K;T.push(4),T.push(4),T.push(10),T.sort((function(e,t){return t-e}));var z=function(){var e=Object(s.useState)(W),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(s.useState)(1),r=Object(a.a)(c,2),i=r[0],l=r[1],u=Object(s.useState)({num:-1,type:-1,level:0}),h=Object(a.a)(u,2),p=h[0],d=h[1],b=Object(s.useState)(!1),v=Object(a.a)(b,2),w=v[0],m=v[1],x=Object(s.useState)([]),O=Object(a.a)(x,2),y=O[0],C=O[1],g=Object(s.useState)(0),k=Object(a.a)(g,2),N=k[0],A=k[1],M=Object(s.useState)({num:0,offense:-1,defense:-1}),P=Object(a.a)(M,2),F=P[0],D=P[1],q=Object(s.useState)(B),K=Object(a.a)(q,2),z=K[0],I=K[1],E=Object(s.useState)(T),L=Object(a.a)(E,2),R=L[0],Y=L[1],J=Object(s.useState)(0),G=Object(a.a)(J,2),H=G[0],Q=G[1],U=Object(s.useState)(0),V=Object(a.a)(U,2),X=V[0],Z=V[1],$=Object(s.useState)([]),_=Object(a.a)($,2),ee=_[0],te=_[1],ne=Object(s.useState)(""),se=Object(a.a)(ne,2),oe=se[0],ce=se[1],re=Object(s.useState)([{num:-1,type:-1,level:0}]),ae=Object(a.a)(re,2),ie=ae[0],le=ae[1],ue=Object(s.useState)(!1),he=Object(a.a)(ue,2),fe=he[0],pe=he[1],de=Object(s.useState)([-1,-1]),be=Object(a.a)(de,2),ve=be[0],je=be[1],we=Object(s.useState)(-1),me=Object(a.a)(we,2),xe=me[0],Oe=me[1],ye=Object(s.useState)(!1),Ce=Object(a.a)(ye,2),ge=Ce[0],ke=Ce[1];return Object(s.useEffect)((function(){}),[y]),Object(f.jsx)("div",{children:Object(f.jsx)(S.Provider,{value:{pieces:n,setPieces:o,turn:i,setTurn:l,select:p,setSelect:d,clickFlag:w,setClickFlag:m,canMove:y,setCanMove:C,modal:N,setModal:A,attack:F,setAttack:D,whitePieces:z,setWhitePieces:I,blackPieces:R,setBlackPieces:Y,phase:H,setPhase:Q,winner:X,setWinner:Z,kifu:ee,setKifu:te,yomifu:oe,setYomifu:ce,click:ie,setClick:le,firstArata:fe,setFirstArata:pe,bouCheck:ve,setBouCheck:je,curKifu:xe,setCurKifu:Oe,ruleBook:ge,setRuleBook:ke},children:Object(f.jsx)(j,{})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),o(e),c(e),r(e)}))};r.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(z,{})}),document.getElementById("root")),I()}},[[42,1,2]]]);
//# sourceMappingURL=main.29dc4c82.chunk.js.map