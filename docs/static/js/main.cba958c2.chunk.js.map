{"version":3,"sources":["App.jsx","components/modals.jsx","components/GameScreen.jsx","components/Board.jsx","components/Piece.jsx","components/OwnPieceArea.jsx","components/OwnPiece.jsx","components/Params.jsx","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","marginTop","content","display","justifyContent","flexDirection","button1","margin","Attack","classes","useContext","PieceContext","modal","setModal","turn","setTurn","attack","setAttack","clickButton","number","newAttack","num","offense","defense","id","className","Button","variant","color","onClick","container","gameArea","paddingTop","leftParamsArea","rightParamsArea","alignItems","paramsArea","height","board","containerM","gameAreaM","ownPieceArea","paramsAreaM","boardM","GameScreen","useMedia","minWidth","isWhite","columnContainer","rowContainer","marginBottom","columnContainerM","rowContainerM","Board","renderPiece","column","row","nineCount","map","columnInt","rowInt","square","borderWidth","borderColor","boxSizing","marginLeft","borderSpacing","borderCollapse","squareM","text","fontSize","piece","backgroundSize","pieceM","selected","canMove","image","Piece","props","pieces","setPieces","select","setSelect","clickFlag","setClickFlag","setCanMove","whitePieces","setWhitePieces","blackPieces","setBlackPieces","phase","setPhase","setWinner","winner","kifu","setKifu","setYomifu","yomifu","setClick","click","firstArata","setFirstArata","setBouFlagW","bouFlagW","setBouFlagB","bouFlagB","setBouCheck","bouCheck","setCurKifu","curKifu","thisNum","curPieces","Array","from","thisPiece","thisClickFlag","isWide","squareString","classString","includes","oppTurn","x","y","kanji","addKifu","thisPieces","newKifu","push","checkBou","curWPiece","filter","whose","curBPiece","checkBouW","some","type","checkBouB","useEffect","newPiece","offenseLevel","difenseLevel","level","splice","under","thisUnderColor","thisPieceString","clickPiece","moveCalculate","xy","dx","dy","isPiece","canMoveNum","i","newMove","checkedCanMove","array","checkCanMove","reduce","accumulator","currentValue","pieceIndex","prevArray","length","index","item","isIncludeKing","checkedRideable","checkRideable","checkedLevel","checkLevel","searchCanMove","newWhitePieces","arataIndex","indexOf","newBlackPieces","curCanMove","j","console","log","params","style","backgroundImage","process","squareContainer","squareContainerSub","border","flexWrap","OwnPieceArea","whiteTypes","self","blackTypes","OwnPiece","whoseNum","setlick","thisType","curOwnPieces","count","checkedAratable","paramsContainer","bunttonContainer","button2","Params","clickString1","clickString2","clickString3","templateSet","templateSetSub","fill","culcuTemplateSet","under1","under2","oppNum","start","initPieces","initWhitePieces","sort","a","b","initBlackPieces","toggleWhose","endPut","curPhase","quickStart","displayKifu","direction","befCurKifu","sumiBotton","numString","turnString","winnerString","prevKifuButton","nextKifuButton","createContext","App","useState","Provider","value","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cba958c2.chunk.js","sourcesContent":["// import './App.css';\r\nimport React, {useState, createContext, useEffect} from 'react'\r\nimport './assets/styles/style.css'\r\nimport { GameScreen } from \"./components/index.js\";\r\n\r\nexport const PieceContext = createContext();\r\n\r\nconst initPieces = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n// initPieces[64] = {type: 11, whose: 1, level: 1};\r\n// initPieces[84] = {type: 12, whose: 1, level: 1};\r\n// initPieces[62] = {type: 4, whose: 1, level: 1};\r\n// initPieces[82] = {type: 4, whose: 1, level: 1};\r\n// initPieces[24] = {type: 11, whose: 2, level: 1};\r\n// initPieces[4] = {type: 12, whose: 2, level: 1};\r\n// initPieces[32] = {type: 4, whose: 2, level: 2, under: {type: 4, whose: 1, level: 1}};\r\n\r\n// let emptyArr25 = new Array(25);\r\nlet initWhitePieces = new Array(25 - 3);\r\nfor (let i = 0; i < 14; i++) {\r\n  initWhitePieces[i] = i;\r\n}\r\nfor (let i = 3; i < 11; i++) {\r\n  initWhitePieces[i + 14 - 3] = i;\r\n}\r\ninitWhitePieces.push(4);\r\ninitWhitePieces.push(4);\r\ninitWhitePieces.push(10);\r\ninitWhitePieces.sort(function(a, b) {\r\n  return a - b;\r\n});\r\n\r\nlet initBlackPieces = new Array(25 - 3);\r\nfor (let i = 0; i < 14; i++) {\r\n  initBlackPieces[i] = i;\r\n}\r\nfor (let i = 3; i < 11; i++) {\r\n  initBlackPieces[i + 14 - 3] = i;\r\n}\r\ninitBlackPieces.push(4);\r\ninitBlackPieces.push(4);\r\ninitBlackPieces.push(10);\r\ninitBlackPieces.sort(function(a, b) {\r\n  return b - a;\r\n});\r\n\r\nconst App = () => {\r\n  const [ pieces, setPieces ] = useState(initPieces);\r\n  const [ turn, setTurn ] = useState(1);\r\n  const [ select, setSelect ] = useState({num: -1, type: -1, level: 0});\r\n  const [ clickFlag, setClickFlag ] = useState(false);\r\n  const [ canMove, setCanMove ] = useState([]);\r\n  const [ modal, setModal ] = useState(0);\r\n  const [ attack, setAttack ] = useState({num: 0, offense: -1, defense: -1});\r\n  const [ whitePieces, setWhitePieces ] = useState(initWhitePieces);\r\n  const [ blackPieces, setBlackPieces ] = useState(initBlackPieces);\r\n  const [ phase, setPhase ] = useState(0);\r\n  const [ winner, setWinner ] = useState(0);\r\n  const [ kifu, setKifu ] = useState([]);\r\n  const [ yomifu, setYomifu ] = useState(\"\");\r\n  const [ click, setClick ] = useState([{num: -1, type: -1, level: 0}]);\r\n  const [ firstArata, setFirstArata ] = useState(false);\r\n  const [ bouFlagW, setBouFlagW ] = useState(false);\r\n  const [ bouFlagB, setBouFlagB ] = useState(false);\r\n  const [ bouCheck, setBouCheck ] = useState([false, false]);\r\n  const [ curKifu, setCurKifu ] = useState(-1);\r\n\r\n  useEffect(() => {\r\n      // console.log(canMove);\r\n  }, [canMove])\r\n  \r\n  return(\r\n    <div>\r\n      <PieceContext.Provider value={{pieces, setPieces, turn, setTurn, select, setSelect, clickFlag, setClickFlag, canMove, setCanMove, modal, setModal, attack, setAttack, whitePieces, setWhitePieces, blackPieces, setBlackPieces, phase, setPhase, winner, setWinner, kifu, setKifu,  yomifu, setYomifu, click, setClick, firstArata, setFirstArata, bouFlagW, setBouFlagW, bouFlagB, setBouFlagB, bouCheck, setBouCheck, curKifu, setCurKifu}}>\r\n        <GameScreen />\r\n      </PieceContext.Provider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React, { useContext } from 'react';\r\nimport { PieceContext } from '../App'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 120,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n    // display: \"flex\",\r\n    // flexDirection: \"column\",\r\n    marginTop: 250,\r\n    // justifyContent: \"center\",\r\n  },\r\n  \r\n  content: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n    width: 120,\r\n    // margin: 5,\r\n  },\r\n  button1: {\r\n    margin: 5,\r\n  },\r\n}));\r\n\r\nconst Attack = () => {\r\n    const classes = useStyles();\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { attack, setAttack } = useContext(PieceContext);\r\n    \r\n    const clickButton = (number) => {\r\n        setModal(0);\r\n        const newAttack = {num: number, offense: attack.offense, defense: attack.defense}\r\n        setAttack(newAttack);\r\n    }\r\n\r\n    if(modal === 1) {\r\n        return (\r\n            <div id=\"modal\" className={classes.paper}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"secondary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(2)}\r\n                    >\r\n                        取る\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(3)}\r\n                    >\r\n                        ツケる\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                        {/* <ClearRoundedIcon /> */}\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else if (modal === 2) {\r\n        return (\r\n            <div id=\"modal\" className={classes.paper}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(3)}\r\n                    >\r\n                        ツケる\r\n                    </Button>\r\n                        <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                        {/* <ClearRoundedIcon /> */}\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else if (modal === 3) {\r\n        return (\r\n            <div id=\"modal\" className={classes.paper}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"secondary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(2)}\r\n                    >\r\n                        取る\r\n                    </Button>\r\n                        <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                        {/* <ClearRoundedIcon /> */}\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport { Attack }","import React from 'react';\r\nimport { Board, OwnPieceArea, Params } from \"./index.js\"\r\nimport { Attack } from './modals.jsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport useMedia from 'use-media';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        display: 'flex',\r\n        margin: \"0 auto\",\r\n        width: 900,\r\n    },\r\n    gameArea: {\r\n        display: 'flex',\r\n        margin: '0 auto',\r\n        paddingTop: '50px',\r\n    },\r\n    leftParamsArea: {\r\n        display: 'flex',\r\n        justifyContent: \"center\",\r\n        width: 170,\r\n    },\r\n    rightParamsArea: {\r\n        display: 'flex',\r\n        // margin: \"0 20px\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        flexDirection: 'column',\r\n        // width: 200,\r\n        width: 170,\r\n        // height: 460,\r\n    },\r\n    paramsArea: {\r\n        height: 200,\r\n        width: 200,\r\n    },\r\n    board: {\r\n        marginTop: 1,\r\n    },\r\n\r\n    containerM: {\r\n        display: 'flex',\r\n        margin: \"50px auto\",\r\n        flexDirection: 'column',\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        // width: 900,\r\n    },\r\n    gameAreaM: {\r\n        // display: 'flex',\r\n        // margin: '0 auto',\r\n        // paddingTop: '50px',\r\n    },\r\n    ownPieceArea: {\r\n        display: 'flex',\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        margin: 20,\r\n    },\r\n    paramsAreaM: {\r\n        display: 'flex',\r\n        justifyContent: \"center\",\r\n    },\r\n    boardM: {\r\n        marginTop: 1,\r\n    },\r\n  }));\r\n\r\nconst GameScreen = () => {\r\n    const classes = useStyles();\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    if(isWide) {\r\n        return(\r\n            <div className={classes.container}>\r\n                <div className={classes.gameArea}>\r\n                    <div className={classes.leftParamsArea}>\r\n                        <OwnPieceArea isWhite={false} />\r\n                        <Attack />\r\n                    </div>\r\n                    <div className={classes.board}>\r\n                        <Board />\r\n                    </div>\r\n                    <div className={classes.rightParamsArea}>\r\n                        <div className={classes.paramsArea}>\r\n                            <Params />\r\n                        </div>\r\n                        <OwnPieceArea isWhite={true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return(\r\n            <div className={classes.containerM}>\r\n                <div className={classes.gameAreaM}>\r\n                    <div className={classes.boardM}>\r\n                        <Board />\r\n                    </div>    \r\n                    <div className={classes.ownPieceArea}>\r\n                        <OwnPieceArea isWhite={true} />\r\n                        <OwnPieceArea isWhite={false} />\r\n                    </div>\r\n                    <div className={classes.paramsAreaM}>\r\n                        <Attack />\r\n                        <Params />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default GameScreen;","import React from 'react';\r\nimport { Piece } from \"./index.js\"\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport useMedia from 'use-media';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        display: 'flex',\r\n        margin: 0,\r\n        width: '459px',\r\n    },\r\n    columnContainer: {\r\n        flexDirection: 'column',\r\n        display: 'flex',\r\n    },\r\n    rowContainer: {\r\n        marginTop: -1,\r\n        marginBottom: 2,\r\n        height: 50,\r\n    },\r\n    containerM: {\r\n        display: 'flex',\r\n        margin: 0,\r\n        width: '369px',\r\n    },\r\n    columnContainerM: {\r\n        flexDirection: 'column',\r\n        display: 'flex',\r\n    },\r\n    rowContainerM: {\r\n        marginTop: -1,\r\n        marginBottom: 2,\r\n        height: 40,\r\n    },\r\n  }));\r\n\r\nconst Board = () => {\r\n    const classes = useStyles();\r\n    const renderPiece = (column, row) => {\r\n        return <Piece \r\n            column={column}\r\n            row={row}\r\n        />\r\n    }\r\n    const nineCount = [1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    if(isWide){\r\n        return(\r\n            <div className={classes.container}>\r\n                {/* <div className={classes.status}>{status}</div> */}\r\n                <div className={classes.columnContainer}>\r\n                     {nineCount.map((columnInt) =>{\r\n                        return(\r\n                            <div className={classes.rowContainer}>\r\n                            {nineCount.map((rowInt) =>{\r\n                                return(renderPiece(columnInt, rowInt));\r\n                            })}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return(\r\n            <div className={classes.containerM}>\r\n                {/* <div className={classes.status}>{status}</div> */}\r\n                <div className={classes.columnContainerM}>\r\n                     {nineCount.map((columnInt) =>{\r\n                        return(\r\n                            <div className={classes.rowContainerM}>\r\n                            {nineCount.map((rowInt) =>{\r\n                                return(renderPiece(columnInt, rowInt));\r\n                            })}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default Board;","import { makeStyles } from '@material-ui/core/styles';\r\nimport { PieceContext } from '../App'\r\nimport React, {useState, useContext, useEffect} from 'react'\r\nimport '../assets/styles/style.css'\r\nimport useMedia from 'use-media';\r\nlet pieceImages = [];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    square: {\r\n        width: 52,\r\n        height: 52,\r\n        borderWidth: 1,\r\n        borderColor: 'black',\r\n        boxSizing: \"border-box\",\r\n        marginLeft: -1,\r\n        backgroundColor: \"#F8BE75\",\r\n        borderSpacing: 0,\r\n        borderCollapse: \"collapse\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    squareM: {\r\n        width: 42,\r\n        height: 42,\r\n        borderWidth: 1,\r\n        borderColor: 'black',\r\n        boxSizing: \"border-box\",\r\n        marginLeft: -1,\r\n        backgroundColor: \"#F8BE75\",\r\n        borderSpacing: 0,\r\n        borderCollapse: \"collapse\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    text: {\r\n      fontSize: 24,\r\n    },\r\n    piece: {\r\n        backgroundSize: \"contain\",\r\n        margin: 0,\r\n        borderColor: 'black',\r\n        borderWidth: 1,\r\n        // boxSizing: \"border-box\",\r\n        width: 50,\r\n        height: 50,\r\n    },\r\n    pieceM: {\r\n        backgroundSize: \"contain\",\r\n        margin: 0,\r\n        borderColor: 'black',\r\n        borderWidth: 1,\r\n        // boxSizing: \"border-box\",\r\n        width: 40,\r\n        height: 40,\r\n    },\r\n    selected: {\r\n        backgroundColor: \"#D0D0D0\",\r\n    },\r\n    canMove: {\r\n        backgroundColor: \"#f5a38e\",\r\n    },\r\n    image: {\r\n\r\n    },\r\n  }));\r\n\r\nconst Piece = (props) => {\r\n    const classes = useStyles();\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { attack, setAttack } = useContext(PieceContext);\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { winner, setWinner } = useContext(PieceContext);\r\n    const { kifu, setKifu } = useContext(PieceContext);\r\n    const { yomifu, setYomifu } = useContext(PieceContext);\r\n    const { click, setClick } = useContext(PieceContext);\r\n    const { firstArata, setFirstArata } = useContext(PieceContext);\r\n    const { bouFlagW, setBouFlagW } = useContext(PieceContext);\r\n    const { bouFlagB, setBouFlagB } = useContext(PieceContext);\r\n    const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n    const { curKifu, setCurKifu } = useContext(PieceContext);\r\n    \r\n    const thisNum = 10 * (props.column - 1) + 9 - props.row;\r\n\r\n    const curPieces = Array.from(pieces);\r\n    const thisPiece = curPieces[thisNum];\r\n\r\n    const thisClickFlag = clickFlag;\r\n    const isWide = useMedia({minWidth: '769px'});\r\n\r\n    let squareString = \"\";\r\n    if(isWide) {\r\n        squareString = `${classes.square}`;\r\n    } else {\r\n        squareString = `${classes.squareM}`;\r\n    }\r\n    let classString = \"\";\r\n    if(isWide) {\r\n        classString = `${classes.piece}`;\r\n    } else {\r\n        classString = `${classes.pieceM}`;\r\n    }\r\n\r\n    if (select.num === thisNum) {\r\n        classString  += ` ${classes.selected}`;\r\n    } \r\n    if (canMove.includes(thisNum)) {\r\n        classString  += ` ${classes.canMove}`;\r\n    }\r\n    \r\n    const toggleWhose = (whose) => {\r\n        if (whose === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const x = thisNum % 10;\r\n    const y = (thisNum - x) / 10;\r\n\r\n    const kanji = ['師', '大', '中', '小', '兵', '侍', '忍', '馬', '弓', '砦', '槍', '謀', '砲', '筒'];\r\n\r\n    const addKifu = (thisPieces) => {\r\n        const newKifu = Array.from(kifu);\r\n        newKifu.push(thisPieces);\r\n        setKifu(newKifu);\r\n    }\r\n\r\n    const checkBou = () => {\r\n        const curWPiece = curPieces.filter((piece) => {\r\n            return piece.whose === 1;\r\n        })\r\n        const curBPiece = curPieces.filter((piece) => {\r\n            return piece.whose === 2;\r\n        })\r\n        const checkBouW = curWPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        const checkBouB = curBPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        setBouCheck([checkBouW, checkBouB]);\r\n    }\r\n\r\n    //攻撃\r\n    useEffect(() => {\r\n        //キャンセル\r\n        if (attack.defense === thisNum){\r\n            if(attack.num === 1) {\r\n                if(turn === 1) {\r\n                    setTurn(2);\r\n                } else {\r\n                    setTurn(1);\r\n                }\r\n                setClickFlag(!clickFlag);\r\n                setAttack({num: 0, piece: -1});\r\n            }\r\n\r\n            let offenseLevel = 1;\r\n            let difenseLevel = 1;\r\n            if(attack.offense < 90) {\r\n                offenseLevel = curPieces[attack.offense].level;\r\n                difenseLevel = curPieces[attack.defense].level;\r\n            }\r\n            \r\n            //取る\r\n            if(attack.num === 2) {\r\n                //レベル３のとき\r\n                if(offenseLevel === 3) {\r\n                    //3が3をとる\r\n                    if(offenseLevel === difenseLevel) {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level, under: curPieces[attack.defense].under});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else if (offenseLevel - difenseLevel === 1) {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 1, under: curPieces[attack.defense].under});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 2});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    }\r\n                //レベル２のとき\r\n                } else if(offenseLevel === 2) {\r\n                    //2が2をとる\r\n                    if(offenseLevel === difenseLevel) {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level, under: curPieces[attack.defense].under});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 1});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    }\r\n                //レベル１のとき\r\n                } else {\r\n                    curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level});\r\n                    curPieces.splice(attack.offense, 1, {type: 0, whose: 0, level: 0});\r\n                }\r\n                addKifu(curPieces);\r\n                // setYomifu(`${x}-${y}-${thisPiece.level}-${kanji[thisPiece.type]}`);\r\n                setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                setClickFlag(!clickFlag);\r\n                checkBou();\r\n            }\r\n            //ツケる\r\n            if(attack.num === 3) {\r\n                //新\r\n                let newPiece;\r\n                if(attack.offense >= 90) {\r\n                    newPiece = {\r\n                        type: attack.type, \r\n                        whose: oppTurn, \r\n                        level: curPieces[attack.defense].level + 1,\r\n                        under: curPieces[attack.defense]\r\n                    }\r\n                    curPieces.splice(attack.defense, 1, newPiece);\r\n                } else {\r\n                    if(offenseLevel === 3) {\r\n                        if(offenseLevel - difenseLevel === 1) {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        } else {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level - 1,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        }\r\n                    }\r\n                    if(offenseLevel === 2) {\r\n                        if(offenseLevel - difenseLevel === 1) {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        } else {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level + 1,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        }  \r\n                    }\r\n                    if(offenseLevel === 1) {\r\n                        newPiece = {\r\n                            type: curPieces[attack.offense].type, \r\n                            whose: oppTurn, \r\n                            level: curPieces[attack.offense].level + 1,\r\n                            under: curPieces[attack.defense]\r\n                        }\r\n                    }\r\n                    curPieces.splice(attack.defense, 1, newPiece);\r\n                    if(offenseLevel >= 2) {\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else {\r\n                        curPieces.splice(attack.offense, 1, {type: -1, whose: 0, level: 0});\r\n                    }\r\n                }\r\n                addKifu(curPieces);\r\n                setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                setClickFlag(!clickFlag);\r\n                checkBou();\r\n            }\r\n            setPieces(curPieces);\r\n            setSelect({num: -1, type: -1, level: 0});\r\n        }\r\n    }, [attack])\r\n\r\n    const UnderColorCheck = () => {\r\n        if (thisPiece.level === 1) {\r\n            return 0;\r\n        } else if (thisPiece.level === 2) {\r\n            if (thisPiece.under.whose === 1) {\r\n                return 1;\r\n            } else {\r\n                return 2;\r\n            }\r\n        } else if (thisPiece.level === 3) {\r\n            if (thisPiece.under.whose === 1) {\r\n                if (thisPiece.under.under.whose === 1) {\r\n                    return 3;\r\n                } else {\r\n                    return 4;\r\n                }\r\n            } else {\r\n                if (thisPiece.under.under.whose === 1) {\r\n                    return 5;\r\n                } else {\r\n                    return 6;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const thisUnderColor = UnderColorCheck();\r\n    const thisPieceString = `piece${thisPiece.type}-${thisPiece.whose}-${thisUnderColor}`;\r\n    // let provisionalPiece = \"\";\r\n    // if(thisPiece.whose !== 0) {\r\n    //     provisionalPiece = `piece0-${thisPiece.whose}-3`;\r\n    //     // provisionalPiece = \"testPiece\";\r\n    // }\r\n\r\n    const searchCanMove = () => {\r\n\r\n        const moveCalculate = (xy, whose) => {\r\n            if (whose === 1){\r\n                const dx = xy[0];\r\n                const dy = xy[1];\r\n                if(x + dx >= 0 && x + dx <= 9 && y + dy >= 0 && y + dy <= 9) {\r\n                    return (y + dy) * 10 + x + dx;\r\n                }\r\n            } else {\r\n                const dx = xy[0];\r\n                const dy = -xy[1];\r\n                if(x + dx >= 0 && x + dx <= 9 && y + dy >= 0 && y + dy <= 9) {\r\n                    return (y + dy) * 10 + x + dx;\r\n                }\r\n            }\r\n        }\r\n        // const checkCheckMate\r\n\r\n        const isIncludeKing = (array) => {\r\n            const checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n                for(let i = 0; i < array.length; i++) {\r\n                    if (array[i] === pieceIndex) {\r\n                        accumulator.push({type: currentValue.type, whose: currentValue.whose, index: pieceIndex});\r\n                    }\r\n                }\r\n                return accumulator;\r\n            }, []).filter((item) => {\r\n                if(item.type === 0) {\r\n                    if(item.whose !== turn) {\r\n                        return true;\r\n                    } \r\n                } else {\r\n                    return true;\r\n                }\r\n                // return item.type !== 0 && item.whose === turn;\r\n            }).map((piece) => {\r\n                return piece.index;\r\n            })\r\n            return checkCanMove;\r\n        }\r\n        const checkRideable = (array) => {\r\n            let checkCanMove = [];\r\n            const alones = [0, 12, 13];\r\n            if(alones.includes(thisPiece.type)) {\r\n                checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n                    for(let i = 0; i < array.length; i++) {\r\n                        if (array[i] === pieceIndex) {\r\n                            accumulator.push({type: currentValue.type, whose: currentValue.whose, index: pieceIndex});\r\n                        }\r\n                    }\r\n                    return accumulator;\r\n                }, []).filter((item) => {\r\n                    return item.whose !== turn;\r\n                }).map((piece) => {\r\n                    return piece.index;\r\n                })\r\n            } else {\r\n                checkCanMove = array;\r\n            }\r\n            return checkCanMove;\r\n        }\r\n\r\n        const checkLevel = (array) => {\r\n            const checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n                for(let i = 0; i < array.length; i++) {\r\n                    if (array[i] === pieceIndex) {\r\n                        accumulator.push({...currentValue, index: pieceIndex});\r\n                    }\r\n                }\r\n                return accumulator;\r\n            }, []).filter((item) => {\r\n                if(thisPiece.type === 0 || thisPiece.type === 12 || thisPiece.type === 13) {\r\n                    return true;\r\n                } else if(thisPiece.type === 9){\r\n                    if(thisPiece.level === 3){\r\n                        if(thisPiece.level !== item.level){\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if(thisPiece.level >= item.level) {\r\n                            return true;\r\n                          }\r\n                    }\r\n                } else {\r\n                    if(thisPiece.level >= item.level) {\r\n                        return true;\r\n                      }\r\n                }\r\n            }).map((piece) => {\r\n                return piece.index;\r\n            })\r\n            return checkCanMove;\r\n        }\r\n\r\n        const isPiece = (num) => {\r\n            if(num >= 0 && num <= 88) {\r\n                return curPieces[num].whose === 0;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        let canMoveNum = [];\r\n\r\n        switch (thisPiece.type) {\r\n            case 0 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                                    moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose), moveCalculate([1, 1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose)];\r\n                }\r\n                break;\r\n            case 1 :\r\n                if(thisPiece.level !== 0) {\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, 0], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, 0], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(thisPiece.level >= 2) {\r\n                        canMoveNum.push(moveCalculate([1, 1], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([1, -1], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([-1, 1], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([-1, -1], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 2 :\r\n                if(thisPiece.level !== 0) {\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(thisPiece.level >= 2) {\r\n                        canMoveNum.push(moveCalculate([0, 1], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([0, -1], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([1, 0], thisPiece.whose));\r\n                        canMoveNum.push(moveCalculate([-1, 0], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 3 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                                    moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    // canMoveNum = [moveCalculate([1, 0], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([0, -1], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                    //                 moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose), moveCalculate([0, -2], thisPiece.whose), moveCalculate([0, 2], thisPiece.whose), \r\n                    //                 moveCalculate([2, 0], thisPiece.whose), moveCalculate([-2, 0], thisPiece.whose)];\r\n                    canMoveNum = [moveCalculate([1, 0], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([0, -1], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                                    moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose)];\r\n                    if(isPiece(canMoveNum[0])) {\r\n                        canMoveNum.push(moveCalculate([2, 0], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[2])) {\r\n                        canMoveNum.push(moveCalculate([0, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[3])) {\r\n                        canMoveNum.push(moveCalculate([-2, 0], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 4 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose)];\r\n                    if(isPiece(canMoveNum[0])) {\r\n                        canMoveNum.push(moveCalculate([0, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[1])) {\r\n                        canMoveNum.push(moveCalculate([0, 2], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 5 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([1, 1], thisPiece.whose), moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([1, 1], thisPiece.whose), moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose)];\r\n                    if(isPiece(canMoveNum[0])) {\r\n                        canMoveNum.push(moveCalculate([2, 2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[1])) {\r\n                        canMoveNum.push(moveCalculate([2, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[2])) {\r\n                        canMoveNum.push(moveCalculate([-2, 2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[3])) {\r\n                        canMoveNum.push(moveCalculate([-2, -2], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 6 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose), \r\n                    moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose)];\r\n                    if(isPiece(canMoveNum[0])) {\r\n                        canMoveNum.push(moveCalculate([0, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[2])) {\r\n                        canMoveNum.push(moveCalculate([2, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[3])) {\r\n                        canMoveNum.push(moveCalculate([-2, -2], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 7 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, 1], thisPiece.whose), moveCalculate([0, -1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([0, 1], thisPiece.whose), moveCalculate([0, -1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose)];\r\n                    if(isPiece(canMoveNum[0])) {\r\n                        canMoveNum.push(moveCalculate([0, 2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[1])) {\r\n                        canMoveNum.push(moveCalculate([0, -2], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[2])) {\r\n                        canMoveNum.push(moveCalculate([2, 0], thisPiece.whose));\r\n                    }\r\n                    if(isPiece(canMoveNum[3])) {\r\n                        canMoveNum.push(moveCalculate([-2, 0], thisPiece.whose));\r\n                    }\r\n                }\r\n                break;\r\n            case 8 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([1, 2], thisPiece.whose), moveCalculate([1, -2], thisPiece.whose), moveCalculate([-1, 2], thisPiece.whose), moveCalculate([-1, -2], thisPiece.whose), \r\n                                        moveCalculate([2, 1], thisPiece.whose), moveCalculate([2, -1], thisPiece.whose), moveCalculate([-2, 1], thisPiece.whose), moveCalculate([-2, -1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([1, 2], thisPiece.whose), moveCalculate([1, -2], thisPiece.whose), moveCalculate([-1, 2], thisPiece.whose), moveCalculate([-1, -2], thisPiece.whose), \r\n                                    moveCalculate([2, 1], thisPiece.whose), moveCalculate([2, -1], thisPiece.whose), moveCalculate([-2, 1], thisPiece.whose), moveCalculate([-2, -1], thisPiece.whose),\r\n                                    moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([0, -1], thisPiece.whose)];\r\n                }\r\n                break;\r\n            case 9 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                                    moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose), moveCalculate([1, 1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose)];\r\n                } else if(thisPiece.level >= 2) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                    moveCalculate([1, -1], thisPiece.whose), moveCalculate([-1, -1], thisPiece.whose), moveCalculate([1, 1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose)];\r\n                }\r\n                break;\r\n            case 10 :\r\n                if(thisPiece.level !== 0) {\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if(thisPiece.level >= 2) {\r\n                    canMoveNum.push(moveCalculate([1, 0], thisPiece.whose));\r\n                    canMoveNum.push(moveCalculate([-1, 0], thisPiece.whose));\r\n                }\r\n                break;\r\n            case 11 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose)];\r\n                }\r\n                break;\r\n            case 12 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, -1], thisPiece.whose), moveCalculate([1, 1], thisPiece.whose), moveCalculate([-1, 1], thisPiece.whose), \r\n                                    moveCalculate([1, -2], thisPiece.whose), moveCalculate([-1, -2], thisPiece.whose)];\r\n                }\r\n                break;\r\n            case 13 :\r\n                if(thisPiece.level === 1) {\r\n                    canMoveNum = [moveCalculate([0, 1], thisPiece.whose), moveCalculate([1, 0], thisPiece.whose), moveCalculate([-1, 0], thisPiece.whose), \r\n                                    moveCalculate([1, -2], thisPiece.whose), moveCalculate([-1, -2], thisPiece.whose)];\r\n                }\r\n                break;\r\n        }\r\n        const checkedCanMove = isIncludeKing(canMoveNum);\r\n        const checkedRideable = checkRideable(checkedCanMove);\r\n        const checkedLevel = checkLevel(checkedRideable);\r\n\r\n        // console.log(checkedRideable);\r\n        // console.log(checkedLevel);\r\n        \r\n        setCanMove(checkedLevel);\r\n    }\r\n\r\n    const clickPiece = () => {\r\n        if (phase === 3) {\r\n            //選択\r\n            setClick(curPieces[thisNum]);\r\n            if (thisClickFlag === false) {\r\n                if (thisPiece.whose === turn){\r\n                    setClickFlag(!thisClickFlag);\r\n                    setSelect({num: thisNum, type: curPieces[thisNum].type, level: curPieces[thisNum].level});\r\n                    // setClick(curPieces[thisNum]);\r\n                    searchCanMove();\r\n                }\r\n            }else{\r\n                //選択解除\r\n                if(!canMove.includes(thisNum)){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    // setClick({type: -1, whose: 0, level: 0})\r\n                    setCanMove([]);\r\n                }\r\n            }\r\n            //動かす\r\n            if (canMove.includes(thisNum)){\r\n                //空マス\r\n                if (curPieces[thisNum].whose === 0){\r\n                    //アラタ\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    //移動\r\n                    } else {\r\n                        if (curPieces[select.num].level === 1) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: select.level});\r\n                            curPieces.splice(select.num, 1, {type: -1, whose: 0, level: 0});\r\n                        } else if (curPieces[select.num].level >= 2) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        }\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                    }\r\n                    setClickFlag(!clickFlag);\r\n                    addKifu(curPieces);\r\n                    checkBou();\r\n                }\r\n                //自駒\r\n                else if (curPieces[thisNum].whose === turn){\r\n                    if(select.num >= 90) {\r\n                        setAttack({num: 3, offense: select.num, defense: thisNum, type: select.type});\r\n                    } else if(select.level >= curPieces[thisNum].level) {\r\n                        setModal(2);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    }\r\n                }\r\n                //敵駒\r\n                if (curPieces[thisNum].whose === oppTurn){\r\n                    //取るかつけるか\r\n                    //王手\r\n                    if(curPieces[thisNum].type === 0) {\r\n                        if(select.level === 3) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 2, under: curPieces[thisNum]});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        } else if(select.level === 2) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        } else {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, {type: 0, whose: 0, level: 0});\r\n                        }\r\n                        addKifu(curPieces);\r\n                        setWinner(turn);\r\n                        setCurKifu(kifu.length);\r\n                        setPhase(4)\r\n                    } else if(select.type === 9) {\r\n                        setModal(2);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    } else if(select.type === 0 || select.type === 9 || select.type > 10) {\r\n                        setModal(3);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    } else if (select.level !== 3){\r\n                        if(select.level >= curPieces[thisNum].level) {\r\n                            setModal(1);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        }\r\n                    } else {\r\n                        if(curPieces[thisNum].level === 3){\r\n                            setModal(3);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        } else {\r\n                            setModal(1);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        }\r\n                        \r\n                    }\r\n                }\r\n                setPieces(curPieces);\r\n                // setClickFlag(!clickFlag);\r\n                setSelect({num: -1, type: -1, level: 0});\r\n                setCanMove([]);\r\n                setTurn(oppTurn);\r\n                // console.log(bouCheck);\r\n            }\r\n        } else if (phase === 1 || phase === 2) {\r\n            if (canMove.includes(thisNum)){\r\n                if (curPieces[thisNum].whose === 0){\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        let curCanMove = [];\r\n                        for (let i = 0; i < 3; i++) {\r\n                            for (let j = 0; j < 9; j++) {\r\n                                curCanMove.push(10 * i + j);\r\n                            }\r\n                        }\r\n                        if(firstArata === false) {\r\n                            setSelect({num: 91, type: 0, level: 1});\r\n                            setCanMove(curCanMove);\r\n                            setFirstArata(true);\r\n                        } else {\r\n                            setSelect({num: -1, type: -1, level: 0});\r\n                            setCanMove([]);\r\n                        }\r\n                        setClickFlag(!clickFlag);\r\n                        setPieces(curPieces);\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                        addKifu(curPieces);\r\n                        if(phase === 1) {\r\n                            setTurn(oppTurn);\r\n                        } \r\n                        if(select.type === 11) {\r\n                            setBouFlagW(true);\r\n                        }\r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n\r\n                        setClickFlag(!clickFlag);\r\n                        setPieces(curPieces);\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                        addKifu(curPieces);\r\n                        setSelect({num: -1, type: -1, level: 0});\r\n                        setCanMove([]);\r\n                        if(phase === 1) {\r\n                            setTurn(oppTurn);\r\n                        } \r\n                        if(select.type === 11) {\r\n                            setBouFlagB(true);\r\n                        }\r\n                    }\r\n                } else if (curPieces[thisNum].whose === turn){\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        let newPiece = {};\r\n                        if(thisPiece.level < 3) {\r\n                            newPiece = {\r\n                                type: select.type, \r\n                                whose: turn, \r\n                                level: select.level + 1,\r\n                                under: thisPiece\r\n                            }\r\n                        }\r\n                        curPieces.splice(thisNum, 1, newPiece);\r\n\r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        let newPiece = {};\r\n\r\n                        if(thisPiece.level < 3) {\r\n                            newPiece = {\r\n                                type: select.type, \r\n                                whose: turn, \r\n                                level: select.level + 1,\r\n                                under: thisPiece\r\n                            }\r\n                        }\r\n                        curPieces.splice(thisNum, 1, newPiece);\r\n                    }\r\n                    setClickFlag(!clickFlag);\r\n                    setPieces(curPieces);\r\n                    setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    addKifu(curPieces);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    setCanMove([]);\r\n                    if(phase === 1) {\r\n                        setTurn(oppTurn);\r\n                    } \r\n                }\r\n            }\r\n            console.log(firstArata);\r\n        }\r\n            // console.log(turn);\r\n            console.log({...curPieces[thisNum], thisNum: thisNum, params: thisPieceString});\r\n    }\r\n    return(\r\n        <button className={squareString} onClick={() =>{clickPiece()}}>\r\n            <div className={classString} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/${thisPieceString}.png)`}}></div>\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Piece;","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { PieceContext } from '../App'\r\nimport { OwnPiece } from \"./index.js\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    squareContainer: {\r\n        padding: 0,\r\n        margin: '0 auto',\r\n        width: 93,\r\n    },\r\n    squareContainerSub: {\r\n        height: 150,\r\n        backgroundColor: \"#F8BE75\",\r\n        border: '1px solid #333',\r\n        display: 'flex',\r\n        flexWrap: \"wrap\",\r\n        flexDirection: 'column',\r\n    }\r\n  }));\r\n\r\nconst OwnPieceArea = (props) => {\r\n    const classes = useStyles();\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n\r\n    const curWhitePieces = Array.from(whitePieces)\r\n    const whiteTypes = curWhitePieces.filter(function (x, i, self) {\r\n        return self.indexOf(x) === i;\r\n      });\r\n\r\n    const curBlackPieces = Array.from(blackPieces)\r\n    const blackTypes = curBlackPieces.filter(function (x, i, self) {\r\n        return self.indexOf(x) === i;\r\n    });\r\n\r\n    return(\r\n        <div className={classes.squareContainer}>\r\n                 {props.isWhite \r\n                    ? <div className={classes.squareContainerSub}>\r\n                        {whiteTypes.map((index)=>{\r\n                            return(\r\n                                <OwnPiece isWhite={props.isWhite} index={index}/>\r\n                            )\r\n                        })}\r\n                        {/* {for(let i = 0; i < 14; i++){\r\n\r\n                        }} */}\r\n                    </div>\r\n                    : <div className={classes.squareContainerSub}>\r\n                        {blackTypes.map((index)=>{\r\n                            return(\r\n                                <OwnPiece isWhite={props.isWhite} index={index}/>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                 }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OwnPieceArea;","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { PieceContext } from '../App'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        // display: 'flex',\r\n        margin: 0,\r\n        width: '50px',\r\n        // flexWrap: 'wrap',\r\n        // flexDirection: 'column',\r\n    },\r\n    square: {\r\n        width: 30,\r\n        height: 30,\r\n        borderWidth: 0,\r\n        // borderColor: 'black',\r\n        // boxSizing: \"border-box\",\r\n        // margin: -1,\r\n        // flexDirection: 'column',\r\n        backgroundColor: \"#F8BE75\",\r\n    },\r\n    piece: {\r\n        backgroundSize: \"contain\",\r\n        borderWidth: 0,\r\n        // boxSizing: \"border-box\",\r\n        width: 30,\r\n        // margin: -1,\r\n        height: 30,\r\n    },\r\n    selected: {\r\n        backgroundColor: \"#D0D0D0\",\r\n    },\r\n  }));\r\n\r\nconst OwnPiece = (props) => {\r\n    const classes = useStyles();\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { attack, setAttack } = useContext(PieceContext);\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { click, setlick } = useContext(PieceContext);\r\n    const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n   \r\n    const thisType = props.index;\r\n    \r\n    // const thisPieceString = \"4-1-0\";\r\n\r\n    let whoseNum;\r\n    if(props.isWhite) {\r\n        whoseNum = 1;\r\n    } else {\r\n        whoseNum = 2;\r\n    }\r\n\r\n    let classString = `${classes.piece}`;\r\n    if (select.type === thisType && select.num === 89 + whoseNum) {\r\n        classString  += ` ${classes.selected}`;\r\n    } \r\n\r\n    let curOwnPieces;\r\n    if(props.isWhite){\r\n        curOwnPieces = Array.from(whitePieces);\r\n    } else {\r\n        curOwnPieces = Array.from(blackPieces);\r\n    }\r\n\r\n    let count = 0;\r\n    for(let i = 0; i < curOwnPieces.length; ++i){\r\n        if(curOwnPieces[i] == thisType)\r\n            count++;\r\n    }\r\n\r\n    let thisUnderColor;\r\n    if (count === 1) {\r\n        thisUnderColor = 0;\r\n    } else if (count === 2) {\r\n        if (whoseNum === 1) {\r\n            thisUnderColor = 1;\r\n        } else {\r\n            thisUnderColor = 2;\r\n        }\r\n    } else if (count === 3) {\r\n        if (whoseNum === 1) {\r\n            thisUnderColor = 3;\r\n        } else {\r\n            thisUnderColor = 6;\r\n        }\r\n    } else {\r\n        thisUnderColor = 7;\r\n    }\r\n\r\n    const thisPieceString = `piece${props.index}-${whoseNum}-${thisUnderColor}`;\r\n\r\n    const curPieces = Array.from(pieces);\r\n\r\n    const toggleWhose = (whose) => {\r\n        if (whose === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const checkAratable = (array) => {\r\n        const checkCanMove = array.filter((item) => {\r\n            if(item.type !== 0 && item.whose !== oppTurn && item.level !== 3) {\r\n                return true;\r\n            }\r\n        }).map((piece) => {\r\n            return piece.index;\r\n        })\r\n        return checkCanMove;\r\n    }\r\n\r\n    const searchCanMove = () => {\r\n        let curCanMove = [];\r\n        if(whoseNum === 1) {\r\n            for (let i = 6; i < 9; i++) {\r\n                for (let j = 0; j < 9; j++) {\r\n                    curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                }\r\n            }\r\n        }\r\n        if(whoseNum === 2) {\r\n            for (let i = 0; i < 3; i++) {\r\n                for (let j = 0; j < 9; j++) {\r\n                    curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                }\r\n            }\r\n        }\r\n\r\n        const checkedAratable = checkAratable(curCanMove);\r\n\r\n        setCanMove(checkedAratable);\r\n    }\r\n    \r\n    if(bouCheck[turn - 1] === true) {\r\n\r\n    }\r\n\r\n    const clickPiece = () => {\r\n        if(phase === 1 || phase === 2) {\r\n            if (clickFlag === false) {\r\n                if (whoseNum === turn){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: whoseNum + 89, type: thisType, level: 1});\r\n                    searchCanMove();\r\n                }\r\n            }else{\r\n                //選択解除\r\n                if(select.num === whoseNum + 89){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    setCanMove([]);\r\n                }\r\n            }\r\n        } else if(phase === 3) {\r\n            if(bouCheck[turn - 1] === true) {\r\n                if (clickFlag === false) {\r\n                    if (whoseNum === turn){\r\n                        setClickFlag(!clickFlag);\r\n                        setSelect({num: whoseNum + 89, type: thisType, level: 1});\r\n                        searchCanMove();\r\n                    }\r\n                }else{\r\n                    //選択解除\r\n                    if(select.num === whoseNum + 89){\r\n                        setClickFlag(!clickFlag);\r\n                        setSelect({num: -1, type: -1, level: 0});\r\n                        setCanMove([]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <button className={classes.square} onClick={() =>{clickPiece()}}>\r\n            <div className={classString} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/${thisPieceString}.png)`}}></div>\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default OwnPiece;","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { PieceContext } from '../App'\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paramsContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n    },\r\n    button1: {\r\n        // margin: 5,\r\n        marginBottom: 10,\r\n        width: 160,\r\n      },\r\n    bunttonContainer: {\r\n        // display: \"flex\",\r\n        // justifyContent: \"space-between\",\r\n    },\r\n    button2: {\r\n        // margin: 5,\r\n        marginBottom: 10,\r\n    },\r\n  }));\r\n\r\nconst Params = (props) => {\r\n    const classes = useStyles();\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { winner, setWinner } = useContext(PieceContext);\r\n    const { kifu, setKifu } = useContext(PieceContext);\r\n    const { yomifu, setYomifu } = useContext(PieceContext);\r\n    const { click, setClick } = useContext(PieceContext);\r\n    const { bouFlagW, setBouFlagW } = useContext(PieceContext);\r\n    const { bouFlagB, setBouFlagB } = useContext(PieceContext);\r\n    const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n    const { curKifu, setCurKifu } = useContext(PieceContext);\r\n\r\n\r\n    \r\n    const kanji = ['師', '大', '中', '小', '兵', '侍', '忍', '馬', '弓', '砦', '槍', '謀', '砲', '筒'];\r\n\r\n    let clickString1 = \"\";\r\n    let clickString2 = \"\";\r\n    let clickString3 = \"\";\r\n    if(click.level === 1) {\r\n        clickString1 = `${kanji[click.type]}`\r\n    } \r\n    if(click.level === 2) {\r\n        clickString1 = `上段：${kanji[click.type]}`\r\n        clickString2 = `下段：${kanji[click.under.type]}`\r\n    }\r\n    if(click.level === 3) {\r\n        clickString1 = `上段：${kanji[click.type]}`\r\n        clickString2 = `中段：${kanji[click.under.type]}`\r\n        clickString3 = `下段：${kanji[click.under.under.type]}`\r\n    }\r\n    const templateSet = () => {\r\n        let templateSetSub = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n\r\n        const culcuTemplateSet = (num, type, level, under1, under2) => {\r\n            const x = 8 - (num % 10);\r\n            const y = 8 - ((num - (8 - x)) / 10);\r\n            const oppNum = y * 10 + x;\r\n            if(level === 1) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 1});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 1});\r\n            } \r\n            if(level === 2) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 2, under: {type: under1, whose: 1, level: 1}});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 2, under: {type: under1, whose: 2, level: 1}});\r\n            }\r\n            if(level === 3) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 3, under: {type: under1, whose: 1, level: 2, under: {type: under2, whose: 1, level: 1}}});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 3, under: {type: under1, whose: 2, level: 2, under: {type: under2, whose: 2, level: 1}}});\r\n            } \r\n        }\r\n        culcuTemplateSet(84, 0, 1);\r\n        culcuTemplateSet(74, 12, 1);\r\n        culcuTemplateSet(64, 6, 1);\r\n        culcuTemplateSet(63, 4, 1);\r\n        culcuTemplateSet(65, 4, 1);\r\n        culcuTemplateSet(62, 7, 1);\r\n        culcuTemplateSet(66, 7, 1);\r\n        culcuTemplateSet(73, 1, 2, 6);\r\n        culcuTemplateSet(75, 2, 2, 13);\r\n        culcuTemplateSet(70, 5, 2, 10);\r\n        culcuTemplateSet(78, 5, 2, 10);\r\n        culcuTemplateSet(61, 3, 2, 4);\r\n        culcuTemplateSet(67, 3, 2, 4);\r\n        culcuTemplateSet(82, 8, 3, 9, 10);\r\n        culcuTemplateSet(86, 8, 3, 9, 11);\r\n\r\n        // templateSetSub.splice(44, 1, {type: 13, whose: 1, level: 1});\r\n        // templateSetSub.splice(44, 1, {type: 10, whose: 1, level: 2, under: {type: 1, whose: 1, level: 1}});\r\n        return templateSetSub;\r\n    }\r\n    const checkBou = () => {\r\n        const curWPiece = pieces.filter((piece) => {\r\n            return piece.whose === 1;\r\n        })\r\n        const curBPiece = pieces.filter((piece) => {\r\n            return piece.whose === 2;\r\n        })\r\n        const checkBouW = curWPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        const checkBouB = curBPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        setBouCheck([checkBouW, checkBouB]);\r\n    }\r\n\r\n    const start = () => {\r\n        const initPieces = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n        let initWhitePieces = new Array(25 - 3);\r\n        for (let i = 0; i < 14; i++) {\r\n        initWhitePieces[i] = i;\r\n        }\r\n        for (let i = 3; i < 11; i++) {\r\n        initWhitePieces[i + 14 - 3] = i;\r\n        }\r\n        initWhitePieces.push(4);\r\n        initWhitePieces.push(4);\r\n        initWhitePieces.push(10);\r\n        initWhitePieces.sort(function(a, b) {\r\n        return a - b;\r\n        });\r\n\r\n        let initBlackPieces = new Array(25 - 3);\r\n        for (let i = 0; i < 14; i++) {\r\n        initBlackPieces[i] = i;\r\n        }\r\n        for (let i = 3; i < 11; i++) {\r\n        initBlackPieces[i + 14 - 3] = i;\r\n        }\r\n        initBlackPieces.push(4);\r\n        initBlackPieces.push(4);\r\n        initBlackPieces.push(10);\r\n\r\n        initBlackPieces.sort(function(a, b) {\r\n        return b - a;\r\n        });\r\n        setPhase(1);\r\n        setSelect({num: 90, type: 0, level: 1});\r\n        let curCanMove = [];\r\n        for (let i = 6; i < 9; i++) {\r\n            for (let j = 0; j < 9; j++) {\r\n                curCanMove.push(10 * i + j);\r\n            }\r\n        }\r\n        setPieces(initPieces);\r\n        setYomifu([]);\r\n        setClickFlag(false);\r\n        setCanMove(curCanMove);\r\n        setWhitePieces(initWhitePieces);\r\n        setBlackPieces(initBlackPieces);\r\n        setTurn(1);\r\n        setKifu([initPieces]);\r\n    }\r\n    const toggleWhose = (turn) => {\r\n        if (turn === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const endPut = () => {\r\n        const curPhase = phase;\r\n        if (phase === 2) {\r\n            setTurn(oppTurn);\r\n        }\r\n        setPhase(curPhase + 1);\r\n        checkBou();\r\n    }\r\n\r\n    const quickStart = () => {\r\n        setPhase(3);\r\n        setYomifu([]);\r\n        setPieces(templateSet());\r\n        setWhitePieces([]);\r\n        setBlackPieces([]);\r\n        setClickFlag(false);\r\n        setTurn(1);\r\n        setKifu([templateSet()])\r\n    }\r\n\r\n    const displayKifu = (direction) => {\r\n        if(direction === true) {\r\n            //戻る\r\n            const befCurKifu = curKifu;\r\n            setCurKifu(befCurKifu - 1); \r\n            setPieces(kifu[befCurKifu - 1]);\r\n        } \r\n        if(direction === false) {\r\n            //次\r\n            const befCurKifu = curKifu;\r\n            setCurKifu(befCurKifu + 1); \r\n            setPieces(kifu[befCurKifu + 1]);\r\n        }\r\n    }\r\n\r\n    if(phase === 0) {\r\n        return(\r\n            <div className={classes.paramsContainer}>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => start()}\r\n                >\r\n                    始める\r\n                </Button>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => quickStart()}\r\n                >\r\n                    クイックスタート\r\n                </Button>\r\n            </div>\r\n            \r\n        )\r\n    } else if(phase === 1 || phase === 2) {\r\n        const numString = `${kifu.length }`;\r\n        let sumiBotton;\r\n        if(phase === 1) {\r\n            if(turn === 2) {\r\n                if(bouFlagW === false){\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    className={classes.button1}\r\n                                >\r\n                                    済み\r\n                                </Button>;\r\n                } else {\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    className={classes.button1}\r\n                                    onClick={() => endPut()}\r\n                                >\r\n                                    済み\r\n                                </Button>\r\n                }\r\n            } else {\r\n                if(bouFlagB === false){\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    className={classes.button1}\r\n                                >\r\n                                    済み\r\n                                </Button>;\r\n                } else {\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    className={classes.button1}\r\n                                    onClick={() => endPut()}\r\n                                >\r\n                                    済み\r\n                                </Button>\r\n                }\r\n            }\r\n        } else {\r\n            if(turn === 1) {\r\n                if(bouFlagW === false){\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    className={classes.button1}\r\n                                >\r\n                                    済み\r\n                                </Button>;\r\n                } else {\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    className={classes.button1}\r\n                                    onClick={() => endPut()}\r\n                                >\r\n                                    済み\r\n                                </Button>\r\n                }\r\n            } else {\r\n                if(bouFlagB === false){\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    className={classes.button1}\r\n                                >\r\n                                    済み\r\n                                </Button>;\r\n                } else {\r\n                    sumiBotton = <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    className={classes.button1}\r\n                                    onClick={() => endPut()}\r\n                                >\r\n                                    済み\r\n                                </Button>\r\n                }\r\n            }\r\n        }\r\n        return(\r\n            <div className={classes.paramsContainer}>\r\n                {sumiBotton}\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    {yomifu}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (phase === 3) {\r\n        // const numString = `${kifu.length + 1}`;\r\n        const numString = `${kifu.length }`;\r\n        let turnString = \"\";\r\n        if(turn === 1) {\r\n            turnString += \"白\";\r\n        } else {\r\n            turnString += \"黒\";\r\n        }\r\n        return (\r\n            <div className={classes.paramsContainer}>\r\n                <div>\r\n                    {turnString}番\r\n                </div>\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    {yomifu}\r\n                </div>\r\n                <div>\r\n                    {clickString1}\r\n                </div>\r\n                <div>\r\n                    {clickString2}\r\n                </div>\r\n                <div>\r\n                    {clickString3}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if(phase === 4) {\r\n        const numString = `${curKifu}`;\r\n        let winnerString = \"\";\r\n        if(winner === 1) {\r\n            winnerString = \"白\";\r\n        } else {\r\n            winnerString = \"黒\";\r\n        }\r\n        let prevKifuButton = \"\";\r\n        if(curKifu > 0) {\r\n            prevKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={classes.button2}\r\n                                color=\"primary\" \r\n                                onClick={() => displayKifu(true)}\r\n                            >←</Button>\r\n        } else {\r\n            prevKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={classes.button2}\r\n                            >←</Button>\r\n        }\r\n        let nextKifuButton = \"\";\r\n        if(curKifu < kifu.length - 1) {\r\n            nextKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={classes.button2}\r\n                                color=\"primary\" \r\n                                onClick={() => displayKifu(false)}\r\n                            >→</Button>\r\n        } else {\r\n            nextKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={classes.button2}\r\n                            >→</Button>\r\n        }\r\n        return(\r\n            <div className={classes.paramsContainer}>\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    勝者 :　{winnerString}\r\n                </div> \r\n                <div className={classes.bunttonContainer}>\r\n                    {prevKifuButton}\r\n                    {nextKifuButton}\r\n                </div>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => start()}\r\n                >\r\n                    再戦\r\n                </Button>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => quickStart()}\r\n                >\r\n                    クイックスタート\r\n                </Button>\r\n            </div>\r\n        )\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default Params;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}