{"version":3,"sources":["components/modals.jsx","components/GameScreen.jsx","components/Board.jsx","components/Piece.jsx","components/OwnPieceArea.jsx","components/OwnPiece.jsx","components/Params.jsx","components/Rule.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","paper","position","width","marginTop","paperM","margin","content","display","justifyContent","flexDirection","height","backgroundColor","button1","button2","padding","closeContainer","ruleBookContainer","ruleBookContainerM","Attack","classes","useContext","PieceContext","modal","setModal","attack","setAttack","isWide","useMedia","minWidth","paperString","clickButton","number","newAttack","num","offense","defense","id","className","Button","variant","color","onClick","RuleBook","ruleBookContainerString","ruleBook","setRuleBook","container","topBar","alignItems","topBarM","gameArea","leftParamsArea","rightParamsArea","paramsArea","board","containerM","gameAreaM","ownPieceArea","paramsAreaM","boardM","GameScreen","phase","setPhase","setPieces","pieces","setCanMove","canMove","setSelect","select","setClickFlag","clickFlag","kifu","setKifu","turn","setTurn","ThemeContext","clickRule","console","log","initPieces","Array","fill","type","whose","level","clickRestart","oppTurn","setPrevPiece","length","prevKifu","from","pop","isWhite","columnContainer","rowContainer","marginBottom","columnContainerM","rowContainerM","Board","renderPiece","column","row","nineCount","map","columnInt","rowInt","square","borderWidth","borderColor","boxSizing","marginLeft","borderSpacing","borderCollapse","squareM","text","fontSize","piece","backgroundSize","pieceM","selected","image","Piece","props","whitePieces","setWhitePieces","blackPieces","setBlackPieces","setWinner","winner","setYomifu","yomifu","setClick","click","firstArata","setFirstArata","bouCheck","setBouCheck","setCurKifu","curKifu","thisNum","curPieces","thisPiece","thisClickFlag","squareString","classString","includes","x","y","kanji","addKifu","thisPieces","newKifu","push","useEffect","newPiece","offenseLevel","difenseLevel","underColor","under","splice","thisUnderColor","thisPieceString","clickPiece","moveCalculate","xy","dx","dy","isPiece","moveNum","canMoveNum","i","newMove","checkedCanMove","array","checkCanMove","reduce","accumulator","currentValue","pieceIndex","prevArray","index","filter","item","isIncludeKing","checkedLevel","checkLevel","searchCanMove","newWhitePieces","arataIndex","indexOf","newBlackPieces","curCanMove","j","params","style","backgroundImage","process","squareContainer","squareContainerSub","border","flexWrap","OwnPieceArea","whiteTypes","self","blackTypes","OwnPiece","whoseNum","thisType","setlick","curOwnPieces","count","checkAratable","checkedAratable","searchCanMove1","searchCanMove2","paramsContainer","paramsContainer2","button1M","buttonContainer","button2M","Params","button1String","button2String","clickString1","clickString2","clickString3","templateSet","templateSetSub","culcuTemplateSet","under1","under2","oppNum","start","initWhitePieces","sort","a","b","initBlackPieces","toggleWhose","endPut","curPhase","curWPiece","curBPiece","checkBouW","some","checkBouB","checkBou","quickStart","displayKifu","direction","befCurKifu","sumiBotton","numString","turnString","winnerString","prevKifuButton","nextKifuButton","overflowX","overflowY","images","contents","Rule","containerString","Accordion","AccordionSummary","Typography","AccordionDetails","accoContainer","createContext","App","useState","createTheme","palette","primary","main","secondary","Provider","value","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5bf121f8.chunk.js","sourcesContent":["import React, { useContext } from 'react';\r\nimport { PieceContext } from '../App'\r\nimport { makeStyles } from '@mui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Rule } from \"./index.js\"\r\nimport useMedia from 'use-media';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 120,\r\n    // backgroundColor: theme.palette.background.paper,\r\n    // boxShadow: theme.shadows[5],\r\n    // padding: theme.spacing(2, 2, 2),\r\n    marginTop: 250,\r\n  },\r\n  paperM: {\r\n    position: 'absolute',\r\n    width: 120,\r\n    margin: \"-80px 0 0 20px\",\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    flexDirection: \"column\",\r\n    width: 120,\r\n    height: 120,\r\n    backgroundColor: \"#ffffff\",\r\n  },\r\n  button1: {\r\n    margin: 5,\r\n  },\r\n  button2: {\r\n    height: 30,\r\n    width: 30,\r\n    margin: 5,\r\n    padding: 0,\r\n  },\r\n  closeContainer: {\r\n      display: \"flex\",\r\n      justifyContent: \"flex-end\",\r\n  },\r\n  ruleBookContainer: {\r\n    width: 458,\r\n    height: 458,\r\n    backgroundColor: \"#cccccc\",\r\n    position: \"absolute\",\r\n  },\r\n  ruleBookContainerM: {\r\n    margin: -2,\r\n    width: 354,\r\n    height: 354,\r\n    backgroundColor: \"#cccccc\",\r\n    position: \"absolute\",\r\n  },\r\n}));\r\n\r\nconst Attack = () => {\r\n    const classes = useStyles();\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { attack, setAttack } = useContext(PieceContext);\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    let paperString = \"\";\r\n    if(isWide) {\r\n        paperString = `${classes.paper}`\r\n    } else {\r\n        paperString = `${classes.paperM}`\r\n    }\r\n    const clickButton = (number) => {\r\n        setModal(0);\r\n        const newAttack = {num: number, offense: attack.offense, defense: attack.defense}\r\n        setAttack(newAttack);\r\n    }\r\n\r\n    if(modal === 1) {\r\n        return (\r\n            <div id=\"modal\" className={paperString}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"secondary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(2)}\r\n                    >\r\n                        取る\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(3)}\r\n                    >\r\n                        ツケる\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else if (modal === 2) {\r\n        return (\r\n            <div id=\"modal\" className={paperString}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(3)}\r\n                    >\r\n                        ツケる\r\n                    </Button>\r\n                        <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else if (modal === 3) {\r\n        return (\r\n            <div id=\"modal\" className={paperString}>\r\n                <div id=\"content\" className={classes.content}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"secondary\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(2)}\r\n                    >\r\n                        取る\r\n                    </Button>\r\n                        <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button1}\r\n                        onClick={() => clickButton(1)}\r\n                    >\r\n                        キャンセル\r\n                    </Button>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst RuleBook = () => {\r\n    const classes = useStyles();\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    let ruleBookContainerString = \"\";\r\n    if(isWide) {\r\n        ruleBookContainerString = `${classes.ruleBookContainer}`\r\n    } else {\r\n        ruleBookContainerString = `${classes.ruleBookContainerM}`\r\n    }\r\n    const { ruleBook, setRuleBook } = useContext(PieceContext);\r\n    const clickRule = () => {\r\n        setRuleBook(!ruleBook)\r\n    }\r\n    if(ruleBook) {\r\n        return (\r\n            <div className={ruleBookContainerString}>\r\n                <div className={classes.closeContainer}>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        className={classes.button2}\r\n                        onClick={() => clickRule()}\r\n                    >\r\n                        ×\r\n                    </Button>\r\n                </div>\r\n                <Rule />\r\n            </div>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\nexport { Attack, RuleBook}","import React, { useContext } from 'react';\r\nimport { PieceContext, ThemeContext} from '../App'\r\nimport { Board, OwnPieceArea, Params } from \"./index.js\"\r\nimport { Attack, RuleBook } from './modals.jsx';\r\nimport { makeStyles } from '@mui/styles';\r\nimport useMedia from 'use-media';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        display: 'flex',\r\n        margin: \"0 auto\",\r\n        width: 900,\r\n        flexDirection: 'column',\r\n    },\r\n    topBar: {\r\n        display: 'flex',\r\n        margin: '10px auto',\r\n        // flexDirection: 'column',\r\n        alignItems: \"space-around\",\r\n        justifyContent: \"space-around\",\r\n        height: 50,\r\n        width: 360\r\n    },\r\n    topBarM: {\r\n        display: 'flex',\r\n        margin: '10px auto',\r\n        // flexDirection: 'column',\r\n        alignItems: \"space-around\",\r\n        justifyContent: \"space-around\",\r\n        // height: 50,\r\n        width: 360,\r\n    },\r\n    \r\n    gameArea: {\r\n        display: 'flex',\r\n        // flexDirection: 'column',\r\n        margin: '0 auto',\r\n        // paddingTop: '50px',\r\n    },\r\n    leftParamsArea: {\r\n        display: 'flex',\r\n        justifyContent: \"center\",\r\n        width: 170,\r\n    },\r\n    rightParamsArea: {\r\n        display: 'flex',\r\n        // margin: \"0 20px\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        flexDirection: 'column',\r\n        // width: 200,\r\n        width: 170,\r\n        // height: 460,\r\n    },\r\n    paramsArea: {\r\n        // display: 'flex',\r\n        height: 200,\r\n        width: 160,\r\n    },\r\n    board: {\r\n        marginTop: 1,\r\n    },\r\n    button1: {\r\n        width: 115,\r\n    },\r\n    containerM: {\r\n        margin: \"0 auto\",\r\n    },\r\n    gameAreaM: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: \"center\",\r\n    },\r\n    ownPieceArea: {\r\n        display: 'flex',\r\n        margin: 20,\r\n    },\r\n    paramsAreaM: {\r\n    },\r\n    boardM: {\r\n        marginTop: 1,\r\n    },\r\n  }));\r\n\r\nconst GameScreen = () => {\r\n    const classes = useStyles();\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    const { ruleBook, setRuleBook } = useContext(PieceContext);\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { kifu, setKifu } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const theme = useContext(ThemeContext);\r\n\r\n    const clickRule = () => {\r\n        setRuleBook(!ruleBook)\r\n        console.log(theme);\r\n    }\r\n\r\n    const initPieces = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n    const clickRestart = () => {\r\n        setPhase(0);\r\n        setCanMove([])\r\n        setSelect({num: -1, type: -1, level: 0})\r\n        setClickFlag(false);\r\n        setPieces(initPieces);\r\n        setModal(0);\r\n    }\r\n    const toggleWhose = (whose) => {\r\n        if (whose === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const setPrevPiece = () => {\r\n        if(kifu.length > 1){\r\n            console.log(kifu);\r\n            const prevKifu = Array.from(kifu);\r\n            prevKifu.pop();\r\n            setKifu(prevKifu);\r\n            setTurn(oppTurn);\r\n            setPieces(kifu[kifu.length - 2]);\r\n        }\r\n    }\r\n\r\n    if(phase === 3) {\r\n        if(isWide) {\r\n            return(\r\n                <div className={classes.container}>\r\n                    <div className={classes.topBar}>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            // color={theme.palette.primary} \r\n                            className={classes.button1}\r\n                            onClick={() => clickRestart()}\r\n                        >\r\n                            はじめから\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => setPrevPiece()}\r\n                        >\r\n                            一手戻る\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRule()}\r\n                        >\r\n                            ルール\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.gameArea}>\r\n                        <div className={classes.leftParamsArea}>\r\n                            <OwnPieceArea isWhite={false} />\r\n                            <Attack />\r\n                        </div>\r\n                        <div className={classes.board}>\r\n                                <RuleBook />\r\n                            <Board />\r\n                        </div>\r\n                        <div className={classes.rightParamsArea}>\r\n                            <div className={classes.paramsArea}>\r\n                                <Params />\r\n                            </div>\r\n                            <OwnPieceArea isWhite={true} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return(\r\n                <div className={classes.containerM}>\r\n                    <div className={classes.topBarM}>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRestart()}\r\n                        >\r\n                            はじめから\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => setPrevPiece()}\r\n                        >\r\n                            一手戻る\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRule()}\r\n                        >\r\n                            ルール\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.gameAreaM}>\r\n                        <div className={classes.boardM}>\r\n                            <RuleBook />\r\n                            <Board />\r\n                        </div>    \r\n                        <div className={classes.ownPieceArea}>\r\n                            <OwnPieceArea isWhite={true} />\r\n                            <div className={classes.paramsAreaM}>\r\n                                <Params />\r\n                                <Attack />\r\n                            </div>\r\n                            <OwnPieceArea isWhite={false} />\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    } else {\r\n        if(isWide) {\r\n            return(\r\n                <div className={classes.container}>\r\n                    <div className={classes.topBar}>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            // color={theme.palette.primary} \r\n                            className={classes.button1}\r\n                            onClick={() => clickRestart()}\r\n                        >\r\n                            はじめから\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRule()}\r\n                        >\r\n                            ルール\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.gameArea}>\r\n                        <div className={classes.leftParamsArea}>\r\n                            <OwnPieceArea isWhite={false} />\r\n                            <Attack />\r\n                        </div>\r\n                        <div className={classes.board}>\r\n                                <RuleBook />\r\n                            <Board />\r\n                        </div>\r\n                        <div className={classes.rightParamsArea}>\r\n                            <div className={classes.paramsArea}>\r\n                                <Params />\r\n                            </div>\r\n                            <OwnPieceArea isWhite={true} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return(\r\n                <div className={classes.containerM}>\r\n                    <div className={classes.topBarM}>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRestart()}\r\n                        >\r\n                            はじめから\r\n                        </Button>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={classes.button1}\r\n                            onClick={() => clickRule()}\r\n                        >\r\n                            ルール\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.gameAreaM}>\r\n                        <div className={classes.boardM}>\r\n                            <RuleBook />\r\n                            <Board />\r\n                        </div>    \r\n                        <div className={classes.ownPieceArea}>\r\n                            <OwnPieceArea isWhite={true} />\r\n                            <div className={classes.paramsAreaM}>\r\n                                <Params />\r\n                                <Attack />\r\n                            </div>\r\n                            <OwnPieceArea isWhite={false} />\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default GameScreen;","import React from 'react';\nimport { Piece } from \"./index.js\"\nimport { makeStyles } from '@mui/styles';\nimport useMedia from 'use-media';\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n        display: 'flex',\n        margin: 0,\n        width: '459px',\n    },\n    columnContainer: {\n        flexDirection: 'column',\n        display: 'flex',\n    },\n    rowContainer: {\n        marginTop: -1,\n        marginBottom: 2,\n        height: 50,\n    },\n    containerM: {\n        display: 'flex',\n        margin: 0,\n        width: '351px',\n    },\n    columnContainerM: {\n        flexDirection: 'column',\n        display: 'flex',\n    },\n    rowContainerM: {\n        marginTop: -1,\n        marginBottom: 2,\n        height: 38,\n    },\n  }));\n\nconst Board = () => {\n    const classes = useStyles();\n    const renderPiece = (column, row) => {\n        return <Piece \n            column={column}\n            row={row}\n        />\n    }\n    const nineCount = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n    const isWide = useMedia({minWidth: '769px'});\n    if(isWide){\n        return(\n            <div className={classes.container}>\n                <div className={classes.columnContainer}>\n                     {nineCount.map((columnInt) =>{\n                        return(\n                            <div className={classes.rowContainer}>\n                            {nineCount.map((rowInt) =>{\n                                return(renderPiece(columnInt, rowInt));\n                            })}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        )\n    } else {\n        return(\n            <div className={classes.containerM}>\n                <div className={classes.columnContainerM}>\n                     {nineCount.map((columnInt) =>{\n                        return(\n                            <div className={classes.rowContainerM}>\n                            {nineCount.map((rowInt) =>{\n                                return(renderPiece(columnInt, rowInt));\n                            })}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Board;","import { makeStyles } from '@mui/styles';\r\nimport { PieceContext } from '../App'\r\nimport React, {useState, useContext, useEffect} from 'react'\r\nimport '../assets/styles/style.css'\r\nimport useMedia from 'use-media';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    square: {\r\n        width: 52,\r\n        height: 52,\r\n        borderWidth: 1,\r\n        borderColor: 'black',\r\n        boxSizing: \"border-box\",\r\n        marginLeft: -1,\r\n        backgroundColor: \"#F8BE75\",\r\n        borderSpacing: 0,\r\n        borderCollapse: \"collapse\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    squareM: {\r\n        width: 40,\r\n        height: 40,\r\n        borderWidth: 1,\r\n        borderColor: 'black',\r\n        boxSizing: \"border-box\",\r\n        marginLeft: -1,\r\n        backgroundColor: \"#F8BE75\",\r\n        borderSpacing: 0,\r\n        borderCollapse: \"collapse\",\r\n        boxSizing: \"border-box\",\r\n    },\r\n    text: {\r\n      fontSize: 24,\r\n    },\r\n    piece: {\r\n        backgroundSize: \"contain\",\r\n        margin: 0,\r\n        borderColor: 'black',\r\n        borderWidth: 1,\r\n        // boxSizing: \"border-box\",\r\n        width: 50,\r\n        height: 50,\r\n    },\r\n    pieceM: {\r\n        backgroundSize: \"contain\",\r\n        margin: 0,\r\n        borderColor: 'black',\r\n        borderWidth: 1,\r\n        // boxSizing: \"border-box\",\r\n        width: 38,\r\n        height: 38,\r\n    },\r\n    selected: {\r\n        backgroundColor: \"#D0D0D0\",\r\n    },\r\n    canMove: {\r\n        backgroundColor: \"#f5a38e\",\r\n    },\r\n    image: {\r\n\r\n    },\r\n  }));\r\n\r\nconst Piece = (props) => {\r\n    const classes = useStyles();\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { modal, setModal } = useContext(PieceContext);\r\n    const { attack, setAttack } = useContext(PieceContext);\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { winner, setWinner } = useContext(PieceContext);\r\n    const { kifu, setKifu } = useContext(PieceContext);\r\n    const { yomifu, setYomifu } = useContext(PieceContext);\r\n    const { click, setClick } = useContext(PieceContext);\r\n    const { firstArata, setFirstArata } = useContext(PieceContext);\r\n    const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n    const { curKifu, setCurKifu } = useContext(PieceContext);\r\n    \r\n    const thisNum = 10 * (props.column - 1) + 9 - props.row;\r\n\r\n    const curPieces = Array.from(pieces);\r\n    const thisPiece = curPieces[thisNum];\r\n\r\n    const thisClickFlag = clickFlag;\r\n    const isWide = useMedia({minWidth: '769px'});\r\n\r\n    let squareString = \"\";\r\n    if(isWide) {\r\n        squareString = `${classes.square}`;\r\n    } else {\r\n        squareString = `${classes.squareM}`;\r\n    }\r\n    let classString = \"\";\r\n    if(isWide) {\r\n        classString = `${classes.piece}`;\r\n    } else {\r\n        classString = `${classes.pieceM}`;\r\n    }\r\n\r\n    if (select.num === thisNum) {\r\n        classString  += ` ${classes.selected}`;\r\n    } \r\n    if (canMove.includes(thisNum)) {\r\n        classString  += ` ${classes.canMove}`;\r\n    }\r\n    \r\n    const toggleWhose = (whose) => {\r\n        if (whose === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const x = thisNum % 10;\r\n    const y = (thisNum - x) / 10;\r\n\r\n    const kanji = ['師', '大', '中', '小', '兵', '侍', '忍', '馬', '弓', '砦', '槍', '謀', '砲', '筒'];\r\n\r\n    const addKifu = (thisPieces) => {\r\n        const newKifu = Array.from(kifu);\r\n        newKifu.push(thisPieces);\r\n        setKifu(newKifu);\r\n    }\r\n\r\n    //攻撃\r\n    useEffect(() => {\r\n        if (attack.defense === thisNum){\r\n            //キャンセル\r\n            if(attack.num === 1) {\r\n                if(turn === 1) {\r\n                    setTurn(2);\r\n                } else {\r\n                    setTurn(1);\r\n                }\r\n                setClickFlag(!clickFlag);\r\n                setAttack({num: 0, piece: -1});\r\n            }\r\n\r\n            let offenseLevel = 1;\r\n            let difenseLevel = 1;\r\n            if(attack.offense < 90) {\r\n                offenseLevel = curPieces[attack.offense].level;\r\n                difenseLevel = curPieces[attack.defense].level;\r\n            }\r\n            \r\n            //取る\r\n            if(attack.num === 2) {\r\n                //レベル３のとき\r\n                if(offenseLevel === 3) {\r\n                    //3が3をとる\r\n                    if(offenseLevel === difenseLevel) {\r\n                        let underColor = 0;\r\n                        //0 黒黒黒　1黒黒白　2黒白黒　3黒白白 (白が攻めの場合)\r\n                        if(curPieces[attack.defense].under.whose !== oppTurn) { \r\n                            if(curPieces[attack.defense].under.under.whose === oppTurn) {\r\n                                underColor = 1;\r\n                            }\r\n                        } else {\r\n                            if(curPieces[attack.defense].under.under.whose !== oppTurn) {\r\n                                underColor = 2;\r\n                            } else {\r\n                                underColor = 3;\r\n                            }\r\n                        }\r\n                        switch (underColor) {\r\n                            case 0 :\r\n                                curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: 1});\r\n                                curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                                break;\r\n                            case 1 :\r\n                                curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: 2, under: curPieces[attack.defense].under.under});\r\n                                curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                                break;\r\n                            case 2 :\r\n                                curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: 2, under: {type: curPieces[attack.defense].under.type, whose: oppTurn, level: 1}});\r\n                                curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                                break;\r\n                            case 3 :\r\n                                curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: 3, under: curPieces[attack.defense].under});\r\n                                curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                        console.log(curPieces[attack.defense].under);\r\n                        // curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level, under: curPieces[attack.defense].under});\r\n                        // curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    //3が2をとる\r\n                    } else if (offenseLevel - difenseLevel === 1) {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 1, under: curPieces[attack.defense].under});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    //3が1をとる\r\n                    } else {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 2});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    }\r\n                //レベル２のとき\r\n                } else if(offenseLevel === 2) {\r\n                    //2が2をとる\r\n                    if(offenseLevel === difenseLevel) {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level, under: curPieces[attack.defense].under});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else {\r\n                        curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level - 1});\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    }\r\n                //レベル１のとき\r\n                } else {\r\n                    curPieces.splice(attack.defense, 1, {type: curPieces[attack.offense].type, whose: oppTurn, level: curPieces[attack.offense].level});\r\n                    curPieces.splice(attack.offense, 1, {type: -1, whose: 0, level: 0});\r\n                }\r\n                addKifu(curPieces);\r\n                setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                setClickFlag(!clickFlag);\r\n            }\r\n            //ツケる\r\n            if(attack.num === 3) {\r\n                //手駒新\r\n                let newPiece;\r\n                if(attack.offense >= 90) {\r\n                    newPiece = {\r\n                        type: attack.type, \r\n                        whose: oppTurn, \r\n                        level: curPieces[attack.defense].level + 1,\r\n                        under: curPieces[attack.defense]\r\n                    }\r\n                    curPieces.splice(attack.defense, 1, newPiece);\r\n                } else {\r\n                    if(offenseLevel === 3) {\r\n                        if(offenseLevel - difenseLevel === 1) {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        } else {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level - 1,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        }\r\n                    }\r\n                    if(offenseLevel === 2) {\r\n                        if(offenseLevel - difenseLevel === 1) {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        } else {\r\n                            newPiece = {\r\n                                type: curPieces[attack.offense].type, \r\n                                whose: oppTurn, \r\n                                level: curPieces[attack.offense].level + 1,\r\n                                under: curPieces[attack.defense]\r\n                            }\r\n                        }  \r\n                    }\r\n                    if(offenseLevel === 1) {\r\n                        newPiece = {\r\n                            type: curPieces[attack.offense].type, \r\n                            whose: oppTurn, \r\n                            level: curPieces[attack.offense].level + 1,\r\n                            under: curPieces[attack.defense]\r\n                        }\r\n                    }\r\n                    curPieces.splice(attack.defense, 1, newPiece);\r\n                    if(offenseLevel >= 2) {\r\n                        curPieces.splice(attack.offense, 1, curPieces[attack.offense].under);\r\n                    } else {\r\n                        curPieces.splice(attack.offense, 1, {type: -1, whose: 0, level: 0});\r\n                    }\r\n                }\r\n                addKifu(curPieces);\r\n                setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                setClickFlag(!clickFlag);\r\n            }\r\n            setPieces(curPieces);\r\n            setSelect({num: -1, type: -1, level: 0});\r\n        }\r\n    }, [attack])\r\n\r\n    const UnderColorCheck = () => {\r\n        if (thisPiece.level === 1) {\r\n            return 0;\r\n        } else if (thisPiece.level === 2) {\r\n            if (thisPiece.under.whose === 1) {\r\n                return 1;\r\n            } else {\r\n                return 2;\r\n            }\r\n        } else if (thisPiece.level === 3) {\r\n            if (thisPiece.under.whose === 1) {\r\n                if (thisPiece.under.under.whose === 1) {\r\n                    return 3;\r\n                } else {\r\n                    return 4;\r\n                }\r\n            } else {\r\n                if (thisPiece.under.under.whose === 1) {\r\n                    return 5;\r\n                } else {\r\n                    return 6;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const thisUnderColor = UnderColorCheck();\r\n    const thisPieceString = `piece${thisPiece.type}-${thisPiece.whose}-${thisUnderColor}`;\r\n\r\n    const searchCanMove = () => {\r\n        const moveCalculate = (xy, whose) => {\r\n            if (whose === 1){\r\n                const dx = xy[0];\r\n                const dy = xy[1];\r\n                if(x + dx >= 0 && x + dx <= 9 && y + dy >= 0 && y + dy <= 9) {\r\n                    return (y + dy) * 10 + x + dx;\r\n                }\r\n            } else {\r\n                const dx = xy[0];\r\n                const dy = -xy[1];\r\n                if(x + dx >= 0 && x + dx <= 9 && y + dy >= 0 && y + dy <= 9) {\r\n                    return (y + dy) * 10 + x + dx;\r\n                }\r\n            }\r\n        }\r\n\r\n        const isIncludeKing = (array) => {\r\n            const checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n                for(let i = 0; i < array.length; i++) {\r\n                    if (array[i] === pieceIndex) {\r\n                        accumulator.push({type: currentValue.type, whose: currentValue.whose, index: pieceIndex});\r\n                    }\r\n                }\r\n                return accumulator;\r\n            }, []).filter((item) => {\r\n                if(item.type === 0) {\r\n                    if(item.whose !== turn) {\r\n                        return true;\r\n                    } \r\n                } else {\r\n                    return true;\r\n                }\r\n            }).map((piece) => {\r\n                return piece.index;\r\n            })\r\n            return checkCanMove;\r\n        }\r\n        // const checkRideable = (array) => {\r\n        //     let checkCanMove = [];\r\n        //     const alones = [0, 12, 13];\r\n        //     if(alones.includes(thisPiece.type)) {\r\n        //         checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n        //             for(let i = 0; i < array.length; i++) {\r\n        //                 if (array[i] === pieceIndex) {\r\n        //                     accumulator.push({type: currentValue.type, whose: currentValue.whose, index: pieceIndex});\r\n        //                 }\r\n        //             }\r\n        //             return accumulator;\r\n        //         }, []).filter((item) => {\r\n        //             return item.whose !== turn;\r\n        //         }).map((piece) => {\r\n        //             return piece.index;\r\n        //         })\r\n        //     } else {\r\n        //         checkCanMove = array;\r\n        //     }\r\n        //     return checkCanMove;\r\n        // }\r\n\r\n        const checkLevel = (array) => {\r\n            const checkCanMove = curPieces.reduce((accumulator, currentValue, pieceIndex, prevArray) => {\r\n                for(let i = 0; i < array.length; i++) {\r\n                    if (array[i] === pieceIndex) {\r\n                        accumulator.push({...currentValue, index: pieceIndex});\r\n                    }\r\n                }\r\n                return accumulator;\r\n            }, []).filter((item) => {\r\n                if(thisPiece.level !== 3) {\r\n                    if(thisPiece.level >= item.level) {\r\n                        return true;\r\n                    }\r\n                //レベル３の時\r\n                } else {\r\n                    if(thisPiece.whose !== item.whose) {\r\n                        if(thisPiece.level >= item.level) {\r\n                            return true;\r\n                            }\r\n                    } else {\r\n                        if(item.level !== 3) {\r\n                            return true;\r\n                            }\r\n                    }\r\n                }\r\n            }).map((piece) => {\r\n                return piece.index;\r\n            })\r\n            return checkCanMove;\r\n        }\r\n\r\n        const isPiece = (num) => {\r\n            if(num >= 0 && num <= 88) {\r\n                return curPieces[num].whose === 0;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const moveNum = (num) => {\r\n            switch (num) {\r\n                case 1 :\r\n                    return moveCalculate([0, -1], thisPiece.whose);\r\n                case 2 :\r\n                    return moveCalculate([0, 1], thisPiece.whose);\r\n                case 3 :\r\n                    return moveCalculate([1, 0], thisPiece.whose);\r\n                case 4 :\r\n                    return moveCalculate([-1, 0], thisPiece.whose);\r\n                case 5 :\r\n                    return moveCalculate([1, -1], thisPiece.whose);\r\n                case 6 :\r\n                    return moveCalculate([-1, -1], thisPiece.whose);\r\n                case 7 :\r\n                    return moveCalculate([1, 1], thisPiece.whose);\r\n                case 8 :\r\n                    return moveCalculate([-1, 1], thisPiece.whose);\r\n                case 9 :\r\n                    if(isPiece(moveCalculate([0, -1], thisPiece.whose))){\r\n                        return moveCalculate([0, -2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 10 :\r\n                    if(isPiece(moveCalculate([0, 1], thisPiece.whose))){\r\n                        return moveCalculate([0, 2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 11 :\r\n                    if(isPiece(moveCalculate([1, 0], thisPiece.whose))){\r\n                        return moveCalculate([2, 0], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 12 :\r\n                    if(isPiece(moveCalculate([-1, 0], thisPiece.whose))){\r\n                        return moveCalculate([-2, 0], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 13 :\r\n                    if(isPiece(moveCalculate([1, -1], thisPiece.whose))){\r\n                        return moveCalculate([2, -2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 14 :\r\n                    if(isPiece(moveCalculate([-1, -1], thisPiece.whose))){\r\n                        return moveCalculate([-2, -2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 15 :\r\n                    if(isPiece(moveCalculate([1, 1], thisPiece.whose))){\r\n                        return moveCalculate([2, 2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 16 :\r\n                    if(isPiece(moveCalculate([-1, 1], thisPiece.whose))){\r\n                        return moveCalculate([2, 2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 17 :\r\n                    return moveCalculate([1, -2], thisPiece.whose);\r\n                case 18 :\r\n                    return moveCalculate([-1, -2], thisPiece.whose);\r\n                case 19 :\r\n                    return;\r\n                case 20 :\r\n                    return;\r\n                case 21 :\r\n                    return;\r\n                case 22 :\r\n                    return;\r\n                case 23 :\r\n                    return;\r\n                case 24 :\r\n                    return;\r\n                case 25 :\r\n                    if(isPiece(moveCalculate([0, -1], thisPiece.whose)) && isPiece(moveCalculate([0, -2], thisPiece.whose))){\r\n                        return moveCalculate([0, -3], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 26 :\r\n                    if(isPiece(moveCalculate([0, 1], thisPiece.whose)) && isPiece(moveCalculate([0, 2], thisPiece.whose))){\r\n                        return moveCalculate([0, 3], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 27 :\r\n                    if(isPiece(moveCalculate([1, 0], thisPiece.whose)) && isPiece(moveCalculate([2, 0], thisPiece.whose))){\r\n                        return moveCalculate([3, 0], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 28 :\r\n                    if(isPiece(moveCalculate([-1, 0], thisPiece.whose)) && isPiece(moveCalculate([-2, 0], thisPiece.whose))){\r\n                        return moveCalculate([-3, 0], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 29 :\r\n                    if(isPiece(moveCalculate([1, -1], thisPiece.whose)) && isPiece(moveCalculate([2, -2], thisPiece.whose))){\r\n                        return moveCalculate([3, -3], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 30 :\r\n                    if(isPiece(moveCalculate([-1, -1], thisPiece.whose)) && isPiece(moveCalculate([-2, -2], thisPiece.whose))){\r\n                        return moveCalculate([-3, -3], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 31 :\r\n                    if(isPiece(moveCalculate([1, 1], thisPiece.whose)) && isPiece(moveCalculate([2, 2], thisPiece.whose))){\r\n                        return moveCalculate([2, 2], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 32 :\r\n                    if(isPiece(moveCalculate([-1, 1], thisPiece.whose)) && isPiece(moveCalculate([-2, 2], thisPiece.whose))){\r\n                        return moveCalculate([-3, 3], thisPiece.whose);\r\n                    }\r\n                    break;\r\n                case 33 :\r\n                    if(isPiece(moveCalculate([0, -1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([0, -2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([0, -3], thisPiece.whose))) {\r\n                        return moveCalculate([0, -4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                case 34 :\r\n                    if(isPiece(moveCalculate([0, 1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([0, 2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([0, 3], thisPiece.whose))) {\r\n                        return moveCalculate([0, 4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                case 35 :\r\n                    if(isPiece(moveCalculate([1, -1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([2, -2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([3, -3], thisPiece.whose))) {\r\n                        return moveCalculate([4, -4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                case 36 :\r\n                    if(isPiece(moveCalculate([-1, -1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([-2, -2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([-3, -3], thisPiece.whose))) {\r\n                        return moveCalculate([-4, -4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                case 37 :\r\n                    if(isPiece(moveCalculate([1, 1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([2, 2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([3, 3], thisPiece.whose))) {\r\n                        return moveCalculate([4, 4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                case 38 :\r\n                    if(isPiece(moveCalculate([-1, 1], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([-2, 2], thisPiece.whose)) \r\n                        && isPiece(moveCalculate([-3, 3], thisPiece.whose))) {\r\n                        return moveCalculate([-4, 4], thisPiece.whose);\r\n                    }\r\n                    break; \r\n                default:\r\n                    break;\r\n                }\r\n        }\r\n\r\n        let canMoveNum = [];\r\n\r\n        switch (thisPiece.type) {\r\n            case 0 : //師\r\n                // console.log(moveNum(1));\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(2),moveNum(3),moveNum(4),moveNum(5),moveNum(6),moveNum(7),moveNum(8)];\r\n                }\r\n                if(thisPiece.level >= 2) {\r\n                    canMoveNum.push(...[moveNum(9), moveNum(10)]);\r\n                }\r\n                if(thisPiece.level === 3) {\r\n                    canMoveNum.push(...[moveNum(25), moveNum(26), moveNum(27), moveNum(28),\r\n                                        moveNum(29), moveNum(30), moveNum(31), moveNum(32),]);\r\n                }\r\n                break;\r\n            case 1 : //大\r\n                if(thisPiece.level !== 0) {\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, 0], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, 0], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([0, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    canMoveNum.push(...[moveNum(5), moveNum(6), moveNum(7), moveNum(8)]);\r\n\r\n                    if(thisPiece.level >= 2) {\r\n                        canMoveNum.push(...[moveNum(13), moveNum(14), moveNum(15), moveNum(16)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(29), moveNum(30), moveNum(31), moveNum(32)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 2 : //中\r\n                if(thisPiece.level !== 0) {\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([i, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(let i = 1; i <= 9; i++) {\r\n                        const newMove = moveCalculate([-i, -i], thisPiece.whose);\r\n                        canMoveNum.push(newMove);\r\n                        if(!isPiece(newMove)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    canMoveNum.push(...[moveNum(1), moveNum(2), moveNum(3), moveNum(4)]);\r\n\r\n                    if(thisPiece.level >= 2) {\r\n                        canMoveNum.push(...[moveNum(9), moveNum(10), moveNum(11), moveNum(12)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(25), moveNum(26), moveNum(27), moveNum(28)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 3 : //小\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(2),moveNum(3),moveNum(4),\r\n                                  moveNum(5),moveNum(6)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(9), moveNum(10), moveNum(11), \r\n                                            moveNum(12), moveNum(13), moveNum(14)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(25), moveNum(26),moveNum(27),\r\n                                            moveNum(28), moveNum(29), moveNum(30)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 4 : //兵\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(2)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(9), moveNum(10)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(25), moveNum(26)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 5 : //侍\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(2),moveNum(5),moveNum(6)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(9), moveNum(10), \r\n                                            moveNum(13), moveNum(14)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(25), moveNum(29), moveNum(30)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 6 : //忍\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(5), moveNum(6),moveNum(7),moveNum(8),\r\n                                  moveNum(13), moveNum(14),moveNum(15),moveNum(16)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(29), moveNum(30), \r\n                                            moveNum(31),moveNum(32)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(35), moveNum(36), \r\n                                            moveNum(37),moveNum(38)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 7 :　//馬\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(2),moveNum(3),moveNum(4),\r\n                                  moveNum(9), moveNum(10)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(11), moveNum(12), \r\n                                            moveNum(25),moveNum(26)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(27), moveNum(28), \r\n                                            moveNum(33),moveNum(34)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 8 : //弓\r\n                \r\n                break;\r\n            case 9 : //砦\r\n                if(thisPiece.level !== 0) {\r\n                    canMoveNum = [moveNum(1), moveNum(3), moveNum(4),\r\n                                moveNum(7), moveNum(8)];\r\n                \r\n                    if(thisPiece.level >= 2) {\r\n                        console.log(canMoveNum);\r\n                        canMoveNum.push(...[moveNum(9), moveNum(11), moveNum(12), \r\n                                            moveNum(15), moveNum(16)]);\r\n                    }\r\n                    if(thisPiece.level === 3) {\r\n                        canMoveNum.push(...[moveNum(25), moveNum(27), moveNum(28), \r\n                                            moveNum(31), moveNum(32)]);\r\n                    }\r\n                }\r\n                break;\r\n            case 10 : //槍\r\n            if(thisPiece.level !== 0) {\r\n                canMoveNum = [moveNum(1), moveNum(2),moveNum(5),\r\n                              moveNum(6),moveNum(9)];\r\n            \r\n                if(thisPiece.level >= 2) {\r\n                    console.log(canMoveNum);\r\n                    canMoveNum.push(...[moveNum(10),moveNum(13), \r\n                                        moveNum(14), moveNum(25)]);\r\n                }\r\n                if(thisPiece.level === 3) {\r\n                    canMoveNum.push(...[moveNum(29), moveNum(30), \r\n                                        moveNum(33), moveNum(34)]);\r\n                }\r\n            }\r\n                break;\r\n            case 11 : //謀\r\n            if(thisPiece.level !== 0) {\r\n                canMoveNum = [moveNum(2), moveNum(5),moveNum(6)];\r\n            \r\n                if(thisPiece.level >= 2) {\r\n                    console.log(canMoveNum);\r\n                    canMoveNum.push(...[moveNum(10),moveNum(13), \r\n                                        moveNum(14)]);\r\n                }\r\n                if(thisPiece.level === 3) {\r\n                    canMoveNum.push(...[moveNum(26), moveNum(30), moveNum(33)]);\r\n                }\r\n            }\r\n                break;\r\n            case 12 : //砲\r\n                \r\n                break;\r\n            case 13 : //筒\r\n                \r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        console.log(canMoveNum);\r\n        const checkedCanMove = isIncludeKing(canMoveNum);\r\n        // const checkedRideable = checkRideable(checkedCanMove);\r\n        const checkedLevel = checkLevel(checkedCanMove);\r\n        setCanMove(checkedLevel);\r\n    }\r\n\r\n    const clickPiece = () => {\r\n        if (phase === 3) {\r\n            //選択\r\n            setClick(curPieces[thisNum]);\r\n            if (thisClickFlag === false) {\r\n                if (thisPiece.whose === turn){\r\n                    setClickFlag(!thisClickFlag);\r\n                    setSelect({num: thisNum, type: curPieces[thisNum].type, level: curPieces[thisNum].level});\r\n                    searchCanMove();\r\n                }\r\n            }else{\r\n                //選択解除\r\n                if(!canMove.includes(thisNum)){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    setCanMove([]);\r\n                }\r\n            }\r\n            //動かす\r\n            if (canMove.includes(thisNum)){\r\n                //空マス\r\n                if (curPieces[thisNum].whose === 0){\r\n                    //アラタ\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    //移動\r\n                    } else {\r\n                        if (curPieces[select.num].level === 1) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: select.level});\r\n                            curPieces.splice(select.num, 1, {type: -1, whose: 0, level: 0});\r\n                        } else if (curPieces[select.num].level >= 2) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        }\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}`);\r\n                    }\r\n                    setClickFlag(!clickFlag);\r\n                    addKifu(curPieces);\r\n                    // checkBou();\r\n                }\r\n                //自駒\r\n                else if (curPieces[thisNum].whose === turn){\r\n                    if(select.num >= 90) {\r\n                        setAttack({num: 3, offense: select.num, defense: thisNum, type: select.type});\r\n                    } else if(select.level >= curPieces[thisNum].level) {\r\n                        setModal(2);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    }\r\n                }\r\n                //敵駒\r\n                if (curPieces[thisNum].whose === oppTurn){\r\n                    //取るかつけるか\r\n                    //王手\r\n                    if(curPieces[thisNum].type === 0) {\r\n                        if(select.level === 3) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 2, under: curPieces[thisNum]});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        } else if(select.level === 2) {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, curPieces[select.num].under);\r\n                        } else {\r\n                            curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                            curPieces.splice(select.num, 1, {type: -1, whose: 0, level: 0});\r\n                        }\r\n                        addKifu(curPieces);\r\n                        setWinner(turn);\r\n                        setCurKifu(kifu.length);\r\n                        setPhase(4)\r\n                    } else if(select.type === 9) {\r\n                        setModal(2);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    } else if(select.type === 0 || select.type === 9 || select.type > 10) {\r\n                        setModal(3);\r\n                        setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                    } else if (select.level !== 3){\r\n                        if(select.level >= curPieces[thisNum].level) {\r\n                            setModal(1);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        }\r\n                    } else {\r\n                        if(curPieces[thisNum].level === 3){\r\n                            setModal(3);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        } else {\r\n                            setModal(1);\r\n                            setAttack({num: -1, offense: select.num, defense: thisNum});\r\n                        }\r\n                        \r\n                    }\r\n                }\r\n                setPieces(curPieces);\r\n                setSelect({num: -1, type: -1, level: 0});\r\n                setCanMove([]);\r\n                setTurn(oppTurn);\r\n            }\r\n        } else if (phase === 1 || phase === 2) {\r\n            if (canMove.includes(thisNum)){\r\n                if (curPieces[thisNum].whose === 0){\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n                        let curCanMove = [];\r\n                        for (let i = 0; i < 3; i++) {\r\n                            for (let j = 0; j < 9; j++) {\r\n                                curCanMove.push(10 * i + j);\r\n                            }\r\n                        }\r\n                        if(firstArata === false) {\r\n                            setSelect({num: 91, type: 0, level: 1});\r\n                            setCanMove(curCanMove);\r\n                            setFirstArata(true);\r\n                        } else {\r\n                            setSelect({num: -1, type: -1, level: 0});\r\n                            setCanMove([]);\r\n                        }\r\n                        setClickFlag(!clickFlag);\r\n                        setPieces(curPieces);\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                        addKifu(curPieces);\r\n                        if(phase === 1) {\r\n                            setTurn(oppTurn);\r\n                        } \r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        curPieces.splice(thisNum, 1, {type: select.type, whose: turn, level: 1});\r\n\r\n                        setClickFlag(!clickFlag);\r\n                        setPieces(curPieces);\r\n                        setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                        addKifu(curPieces);\r\n                        setSelect({num: -1, type: -1, level: 0});\r\n                        setCanMove([]);\r\n                        if(phase === 1) {\r\n                            setTurn(oppTurn);\r\n                        } \r\n                    }\r\n                } else if (curPieces[thisNum].whose === turn){\r\n                    if(select.num === 90){\r\n                        let newWhitePieces = Array.from(whitePieces);\r\n                        const arataIndex = newWhitePieces.indexOf(select.type);\r\n                        newWhitePieces.splice(arataIndex, 1);\r\n                        setWhitePieces(newWhitePieces);\r\n                        let newPiece = {};\r\n                        if(thisPiece.level < 3) {\r\n                            newPiece = {\r\n                                type: select.type, \r\n                                whose: turn, \r\n                                level: select.level + 1,\r\n                                under: thisPiece\r\n                            }\r\n                        }\r\n                        curPieces.splice(thisNum, 1, newPiece);\r\n\r\n                    }else if(select.num === 91) {\r\n                        let newBlackPieces = Array.from(blackPieces);\r\n                        const arataIndex = newBlackPieces.indexOf(select.type);\r\n                        newBlackPieces.splice(arataIndex, 1);\r\n                        setBlackPieces(newBlackPieces);\r\n                        let newPiece = {};\r\n\r\n                        if(thisPiece.level < 3) {\r\n                            newPiece = {\r\n                                type: select.type, \r\n                                whose: turn, \r\n                                level: select.level + 1,\r\n                                under: thisPiece\r\n                            }\r\n                        }\r\n                        curPieces.splice(thisNum, 1, newPiece);\r\n                    }\r\n                    setClickFlag(!clickFlag);\r\n                    setPieces(curPieces);\r\n                    setYomifu(`${x + 1}-${y + 1}-${curPieces[thisNum].level}-${kanji[curPieces[thisNum].type]}-新`);\r\n                    addKifu(curPieces);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    setCanMove([]);\r\n                    if(phase === 1) {\r\n                        setTurn(oppTurn);\r\n                    } \r\n                }\r\n            }\r\n            console.log(firstArata);\r\n        }\r\n        console.log({...curPieces[thisNum], thisNum: thisNum, params: thisPieceString});\r\n    }\r\n    return(\r\n        <button className={squareString} onClick={() =>{clickPiece()}}>\r\n            <div className={classString} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/${thisPieceString}.png)`}}></div>\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Piece;","import React, { useContext } from 'react';\nimport { makeStyles } from '@mui/styles';\nimport { PieceContext } from '../App'\nimport { OwnPiece } from \"./index.js\"\n\nconst useStyles = makeStyles((theme) => ({\n    squareContainer: {\n        padding: 0,\n        margin: '0 auto',\n        width: 93,\n    },\n    squareContainerSub: {\n        height: 150,\n        backgroundColor: \"#F8BE75\",\n        border: '1px solid #333',\n        display: 'flex',\n        flexWrap: \"wrap\",\n        flexDirection: 'column',\n    }\n  }));\n\nconst OwnPieceArea = (props) => {\n    const classes = useStyles();\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\n\n    const curWhitePieces = Array.from(whitePieces)\n    const whiteTypes = curWhitePieces.filter(function (x, i, self) {\n        return self.indexOf(x) === i;\n      });\n\n    const curBlackPieces = Array.from(blackPieces)\n    const blackTypes = curBlackPieces.filter(function (x, i, self) {\n        return self.indexOf(x) === i;\n    });\n\n    return(\n        <div className={classes.squareContainer}>\n                 {props.isWhite \n                    ? <div className={classes.squareContainerSub}>\n                        {whiteTypes.map((index)=>{\n                            return(\n                                <OwnPiece isWhite={props.isWhite} index={index}/>\n                            )\n                        })}\n                    </div>\n                    : <div className={classes.squareContainerSub}>\n                        {blackTypes.map((index)=>{\n                            return(\n                                <OwnPiece isWhite={props.isWhite} index={index}/>\n                            )\n                        })}\n                    </div>\n                 }\n        </div>\n    )\n}\n\nexport default OwnPieceArea;","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport { PieceContext } from '../App'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        margin: 0,\r\n        width: '50px',\r\n    },\r\n    square: {\r\n        width: 30,\r\n        height: 30,\r\n        borderWidth: 0,\r\n        backgroundColor: \"#F8BE75\",\r\n    },\r\n    piece: {\r\n        backgroundSize: \"contain\",\r\n        borderWidth: 0,\r\n        width: 30,\r\n        height: 30,\r\n    },\r\n    selected: {\r\n        backgroundColor: \"#D0D0D0\",\r\n    },\r\n  }));\r\n\r\nconst OwnPiece = (props) => {\r\n    const classes = useStyles();\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { click, setlick } = useContext(PieceContext);\r\n    // const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n   \r\n    const thisType = props.index;\r\n    \r\n    let whoseNum;\r\n    if(props.isWhite) {\r\n        whoseNum = 1;\r\n    } else {\r\n        whoseNum = 2;\r\n    }\r\n\r\n    let classString = `${classes.piece}`;\r\n    if (select.type === thisType && select.num === 89 + whoseNum) {\r\n        classString  += ` ${classes.selected}`;\r\n    } \r\n\r\n    let curOwnPieces;\r\n    if(props.isWhite){\r\n        curOwnPieces = Array.from(whitePieces);\r\n    } else {\r\n        curOwnPieces = Array.from(blackPieces);\r\n    }\r\n\r\n    let count = 0;\r\n    for(let i = 0; i < curOwnPieces.length; ++i){\r\n        if(curOwnPieces[i] == thisType)\r\n            count++;\r\n    }\r\n\r\n    let thisUnderColor;\r\n    if (count === 1) {\r\n        thisUnderColor = 0;\r\n    } else if (count === 2) {\r\n        if (whoseNum === 1) {\r\n            thisUnderColor = 1;\r\n        } else {\r\n            thisUnderColor = 2;\r\n        }\r\n    } else if (count === 3) {\r\n        if (whoseNum === 1) {\r\n            thisUnderColor = 3;\r\n        } else {\r\n            thisUnderColor = 6;\r\n        }\r\n    } else {\r\n        thisUnderColor = 7;\r\n    }\r\n\r\n    const thisPieceString = `piece${props.index}-${whoseNum}-${thisUnderColor}`;\r\n\r\n    const curPieces = Array.from(pieces);\r\n\r\n    const toggleWhose = (whose) => {\r\n        if (whose === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const checkAratable = (array) => {\r\n        const checkCanMove = array.filter((item) => {\r\n            if(item.type !== 0 && item.whose !== oppTurn && item.level !== 3) {\r\n                return true;\r\n            }\r\n        }).map((piece) => {\r\n            return piece.index;\r\n        })\r\n        return checkCanMove;\r\n    }\r\n\r\n    const searchCanMove1 = () => {\r\n        let curCanMove = [];\r\n        if(whoseNum === 1) {\r\n            if(thisType === 11) {\r\n                for (let i = 0; i < 9; i++) {\r\n                    curCanMove.push({...curPieces[80 + i], index: 80 + i});\r\n                }\r\n            } else {\r\n                for (let i = 6; i < 9; i++) {\r\n                    for (let j = 0; j < 9; j++) {\r\n                        curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(whoseNum === 2) {\r\n            if(thisType === 11) {\r\n                for (let i = 0; i < 9; i++) {\r\n                    curCanMove.push({...curPieces[i], index: i});\r\n                }\r\n            } else {\r\n                for (let i = 0; i < 3; i++) {\r\n                    for (let j = 0; j < 9; j++) {\r\n                        curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const checkedAratable = checkAratable(curCanMove);\r\n\r\n        setCanMove(checkedAratable);\r\n    }\r\n    \r\n    // const searchCanMove2 = () => {\r\n    //     let curCanMove = [];\r\n    //     let WArea = 6;\r\n    //     if(bouCheck[0] < 6 && bouCheck[0] > 0) {\r\n    //         WArea = bouCheck[0]\r\n    //     }\r\n    //     if(whoseNum === 1) {\r\n    //         for (let i = WArea; i < 9; i++) {\r\n    //             for (let j = 0; j < 9; j++) {\r\n    //                 curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     let BArea = 3;\r\n    //     if(bouCheck[1] >= 3) {\r\n    //         BArea = bouCheck[1] + 1\r\n    //     }\r\n    //     if(whoseNum === 2) {\r\n    //         for (let i = 0; i < BArea; i++) {\r\n    //             for (let j = 0; j < 9; j++) {\r\n    //                 curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     const checkedAratable = checkAratable(curCanMove);\r\n    //     console.log(curCanMove);\r\n    //     console.log(checkedAratable);\r\n    //     setCanMove(checkedAratable);\r\n    // }\r\n\r\n    const searchCanMove2 = () => {\r\n        let curCanMove = [];\r\n        if(whoseNum === 1) {\r\n            for (let i = 3; i < 9; i++) {\r\n                for (let j = 0; j < 9; j++) {\r\n                    curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                }\r\n            }\r\n        }\r\n        if(whoseNum === 2) {\r\n            for (let i = 0; i < 6; i++) {\r\n                for (let j = 0; j < 9; j++) {\r\n                    curCanMove.push({...curPieces[10 * i + j], index: 10 * i + j});\r\n                }\r\n            }\r\n        }\r\n\r\n        const checkedAratable = checkAratable(curCanMove);\r\n        console.log(curCanMove);\r\n        console.log(checkedAratable);\r\n        setCanMove(checkedAratable);\r\n    }\r\n\r\n    const clickPiece = () => {\r\n        if(phase === 1 || phase === 2) {\r\n            if (clickFlag === false) {\r\n                if (whoseNum === turn){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: whoseNum + 89, type: thisType, level: 1});\r\n                    searchCanMove1();\r\n                }\r\n            }else{\r\n                //選択解除\r\n                if(select.num === whoseNum + 89){\r\n                    setClickFlag(!clickFlag);\r\n                    setSelect({num: -1, type: -1, level: 0});\r\n                    setCanMove([]);\r\n                }\r\n            }\r\n        } else if(phase === 3) {\r\n            // console.log(bouCheck);\r\n                if (clickFlag === false) {\r\n                    if (whoseNum === turn){\r\n                        setClickFlag(!clickFlag);\r\n                        setSelect({num: whoseNum + 89, type: thisType, level: 1});\r\n                        searchCanMove2();\r\n                    }\r\n                }else{\r\n                    //選択解除\r\n                    if(select.num === whoseNum + 89){\r\n                        setClickFlag(!clickFlag);\r\n                        setSelect({num: -1, type: -1, level: 0});\r\n                        setCanMove([]);\r\n                    }\r\n                }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <button className={classes.square} onClick={() =>{clickPiece()}}>\r\n            <div className={classString} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/${thisPieceString}.png)`}}></div>\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default OwnPiece;","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport { PieceContext } from '../App'\r\nimport Button from '@material-ui/core/Button';\r\nimport useMedia from 'use-media';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paramsContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        width: 160,\r\n        height: 80,\r\n    },\r\n    paramsContainer2: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n        width: 160,\r\n        height: 180,\r\n    },\r\n    button1: {\r\n        marginBottom: 10,\r\n        width: 160,\r\n      },\r\n    button1M: {\r\n        // margin: \"0 10px 10px 10px\",\r\n        // padding: 0,\r\n        // padding: \"6px 10px\",\r\n        width: 150,\r\n    },\r\n    buttonContainer: {\r\n        width: 150,\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    button2: {\r\n        marginBottom: 10,\r\n    },\r\n    button2M: {\r\n        marginBottom: 10,\r\n    },\r\n  }));\r\n\r\nconst Params = (props) => {\r\n    const classes = useStyles();\r\n    const { phase, setPhase } = useContext(PieceContext);\r\n    const { select, setSelect } = useContext(PieceContext);\r\n    const { canMove, setCanMove } = useContext(PieceContext);\r\n    const { whitePieces, setWhitePieces } = useContext(PieceContext);\r\n    const { blackPieces, setBlackPieces } = useContext(PieceContext);\r\n    const { clickFlag, setClickFlag } = useContext(PieceContext);\r\n    const { turn, setTurn } = useContext(PieceContext);\r\n    const { pieces, setPieces } = useContext(PieceContext);\r\n    const { winner, setWinner } = useContext(PieceContext);\r\n    const { kifu, setKifu } = useContext(PieceContext);\r\n    const { yomifu, setYomifu } = useContext(PieceContext);\r\n    const { click, setClick } = useContext(PieceContext);\r\n    const { bouCheck, setBouCheck } = useContext(PieceContext);\r\n    const { curKifu, setCurKifu } = useContext(PieceContext);\r\n\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    let button1String = \"\";\r\n    if(isWide) {\r\n        button1String = `${classes.button1}`;\r\n    } else {\r\n        button1String = `${classes.button1M}`;\r\n    }\r\n    let button2String = \"\";\r\n    if(isWide) {\r\n        button2String = `${classes.button2}`;\r\n    } else {\r\n        button2String = `${classes.button2M}`;\r\n    }\r\n    const kanji = ['師', '大', '中', '小', '兵', '侍', '忍', '馬', '弓', '砦', '槍', '謀', '砲', '筒'];\r\n\r\n    let clickString1 = \"\";\r\n    let clickString2 = \"\";\r\n    let clickString3 = \"\";\r\n    if(click.level === 1) {\r\n        clickString1 = `${kanji[click.type]}`\r\n    } \r\n    if(click.level === 2) {\r\n        clickString1 = `上段：${kanji[click.type]}`\r\n        clickString2 = `下段：${kanji[click.under.type]}`\r\n    }\r\n    if(click.level === 3) {\r\n        clickString1 = `上段：${kanji[click.type]}`\r\n        clickString2 = `中段：${kanji[click.under.type]}`\r\n        clickString3 = `下段：${kanji[click.under.under.type]}`\r\n    }\r\n    const templateSet = () => {\r\n        let templateSetSub = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n\r\n        const culcuTemplateSet = (num, type, level, under1, under2) => {\r\n            const x = 8 - (num % 10);\r\n            const y = 8 - ((num - (8 - x)) / 10);\r\n            const oppNum = y * 10 + x;\r\n            if(level === 1) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 1});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 1});\r\n            } \r\n            if(level === 2) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 2, under: {type: under1, whose: 1, level: 1}});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 2, under: {type: under1, whose: 2, level: 1}});\r\n            }\r\n            if(level === 3) {\r\n                templateSetSub.splice(num, 1, {type: type, whose: 1, level: 3, under: {type: under1, whose: 1, level: 2, under: {type: under2, whose: 1, level: 1}}});\r\n                templateSetSub.splice(oppNum, 1, {type: type, whose: 2, level: 3, under: {type: under1, whose: 2, level: 2, under: {type: under2, whose: 2, level: 1}}});\r\n            } \r\n        }\r\n\r\n        culcuTemplateSet(84, 0, 1);\r\n        culcuTemplateSet(74, 10, 1);\r\n        culcuTemplateSet(64, 4, 1);\r\n        culcuTemplateSet(63, 5, 1);\r\n        culcuTemplateSet(65, 5, 1);\r\n        culcuTemplateSet(62, 9, 1);\r\n        culcuTemplateSet(66, 9, 1);\r\n        culcuTemplateSet(60, 4, 1);\r\n        culcuTemplateSet(68, 4, 1);\r\n        culcuTemplateSet(71, 6, 1);\r\n        culcuTemplateSet(77, 6, 1);\r\n        culcuTemplateSet(85, 1, 1);\r\n        culcuTemplateSet(83, 2, 1);\r\n        \r\n\r\n        // templateSetSub.splice(44, 1, {type: 5, whose: 1, level: 1});\r\n        // templateSetSub.splice(44, 1, {type: 5, whose: 1, level: 2, under: {type: 1, whose: 1, level: 1}});\r\n        return templateSetSub;\r\n    }\r\n    const checkBou = () => {\r\n        const curWPiece = pieces.filter((piece) => {\r\n            return piece.whose === 1;\r\n        })\r\n        const curBPiece = pieces.filter((piece) => {\r\n            return piece.whose === 2;\r\n        })\r\n        const checkBouW = curWPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        const checkBouB = curBPiece.some((piece) => {\r\n            return piece.type === 11;\r\n        })\r\n        setBouCheck([checkBouW, checkBouB]);\r\n    }\r\n\r\n    const start = () => {\r\n        const initPieces = new Array(89).fill({type: -1, whose: 0, level: 0});\r\n        let initWhitePieces = new Array(25 - 3);\r\n        for (let i = 0; i < 14; i++) {\r\n        initWhitePieces[i] = i;\r\n        }\r\n        for (let i = 3; i < 11; i++) {\r\n        initWhitePieces[i + 14 - 3] = i;\r\n        }\r\n        initWhitePieces.push(4);\r\n        initWhitePieces.push(4);\r\n        initWhitePieces.push(10);\r\n        initWhitePieces.sort(function(a, b) {\r\n        return a - b;\r\n        });\r\n\r\n        let initBlackPieces = new Array(25 - 3);\r\n        for (let i = 0; i < 14; i++) {\r\n        initBlackPieces[i] = i;\r\n        }\r\n        for (let i = 3; i < 11; i++) {\r\n        initBlackPieces[i + 14 - 3] = i;\r\n        }\r\n        initBlackPieces.push(4);\r\n        initBlackPieces.push(4);\r\n        initBlackPieces.push(10);\r\n\r\n        initBlackPieces.sort(function(a, b) {\r\n        return b - a;\r\n        });\r\n        setPhase(1);\r\n        setSelect({num: 90, type: 0, level: 1});\r\n        let curCanMove = [];\r\n        for (let i = 6; i < 9; i++) {\r\n            for (let j = 0; j < 9; j++) {\r\n                curCanMove.push(10 * i + j);\r\n            }\r\n        }\r\n        setPieces(initPieces);\r\n        setYomifu([]);\r\n        setClickFlag(false);\r\n        setCanMove(curCanMove);\r\n        setWhitePieces(initWhitePieces);\r\n        setBlackPieces(initBlackPieces);\r\n        setTurn(1);\r\n        setKifu([initPieces]);\r\n    }\r\n    const toggleWhose = (turn) => {\r\n        if (turn === 1) {\r\n            return 2;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const oppTurn = toggleWhose(turn);\r\n\r\n    const endPut = () => {\r\n        const curPhase = phase;\r\n        if (phase === 2) {\r\n            setTurn(oppTurn);\r\n        }\r\n        setPhase(curPhase + 1);\r\n        checkBou();\r\n    }\r\n\r\n    const quickStart = () => {\r\n        setPhase(3);\r\n        setYomifu([]);\r\n        setPieces(templateSet());\r\n        setWhitePieces([3, 3, 4, 4, 6, 7, 10, 10]);\r\n        setBlackPieces([3, 3, 4, 4, 6, 7, 10, 10]);\r\n        setClickFlag(false);\r\n        setTurn(1);\r\n        setKifu([templateSet()])\r\n    }\r\n\r\n    const displayKifu = (direction) => {\r\n        if(direction === true) {\r\n            //戻る\r\n            const befCurKifu = curKifu;\r\n            setCurKifu(befCurKifu - 1); \r\n            setPieces(kifu[befCurKifu - 1]);\r\n        } \r\n        if(direction === false) {\r\n            //次\r\n            const befCurKifu = curKifu;\r\n            setCurKifu(befCurKifu + 1); \r\n            setPieces(kifu[befCurKifu + 1]);\r\n        }\r\n    }\r\n\r\n    if(phase === 0) {\r\n        return(\r\n            <div className={classes.paramsContainer}>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={button1String}\r\n                            onClick={() => start()}\r\n                >\r\n                    始める\r\n                </Button>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={button1String}\r\n                            onClick={() => quickStart()}\r\n                >\r\n                    初期配置\r\n                </Button>\r\n            </div>\r\n            \r\n        )\r\n    } else if(phase === 1 || phase === 2) {\r\n        const numString = `${kifu.length }`;\r\n        let sumiBotton;\r\n        if(phase === 1) {\r\n            if(turn === 2) {\r\n                sumiBotton = <Button \r\n                                variant=\"contained\" \r\n                                color=\"primary\" \r\n                                className={button1String}\r\n                                onClick={() => endPut()}\r\n                            >\r\n                                済み\r\n                            </Button>\r\n            } else {\r\n                sumiBotton = <Button \r\n                                variant=\"contained\" \r\n                                color=\"primary\" \r\n                                className={button1String}\r\n                                onClick={() => endPut()}\r\n                            >\r\n                                済み\r\n                            </Button>\r\n            }\r\n        } else {\r\n            if(turn === 1) {\r\n                sumiBotton = <Button \r\n                                variant=\"contained\" \r\n                                color=\"primary\" \r\n                                className={button1String}\r\n                                onClick={() => endPut()}\r\n                            >\r\n                                済み\r\n                            </Button>\r\n            } else {\r\n                sumiBotton = <Button \r\n                                variant=\"contained\" \r\n                                color=\"primary\" \r\n                                className={button1String}\r\n                                onClick={() => endPut()}\r\n                            >\r\n                                済み\r\n                            </Button>\r\n            }\r\n        }\r\n        return(\r\n            <div className={classes.paramsContainer}>\r\n                {sumiBotton}\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    {yomifu}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (phase === 3) {\r\n        const numString = `${kifu.length }`;\r\n        let turnString = \"\";\r\n        if(turn === 1) {\r\n            turnString += \"白\";\r\n        } else {\r\n            turnString += \"黒\";\r\n        }\r\n        return (\r\n            <div className={classes.paramsContainer}>\r\n                <div>\r\n                    {turnString}番\r\n                </div>\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    {yomifu}\r\n                </div>\r\n                <div>\r\n                    {clickString1}\r\n                </div>\r\n                <div>\r\n                    {clickString2}\r\n                </div>\r\n                <div>\r\n                    {clickString3}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if(phase === 4) {\r\n        const numString = `${curKifu}`;\r\n        let winnerString = \"\";\r\n        if(winner === 1) {\r\n            winnerString = \"白\";\r\n        } else {\r\n            winnerString = \"黒\";\r\n        }\r\n        let prevKifuButton = \"\";\r\n        if(curKifu > 0) {\r\n            prevKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={button2String}\r\n                                color=\"primary\" \r\n                                onClick={() => displayKifu(true)}\r\n                            >←</Button>\r\n        } else {\r\n            prevKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={button2String}\r\n                            >←</Button>\r\n        }\r\n        let nextKifuButton = \"\";\r\n        if(curKifu < kifu.length - 1) {\r\n            nextKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={button2String}\r\n                                color=\"primary\" \r\n                                onClick={() => displayKifu(false)}\r\n                            >→</Button>\r\n        } else {\r\n            nextKifuButton = <Button\r\n                                variant=\"contained\" \r\n                                className={button2String}\r\n                            >→</Button>\r\n        }\r\n        return(\r\n            <div className={classes.paramsContainer2}>\r\n                <div>\r\n                    {numString}手目\r\n                </div>\r\n                <div>\r\n                    勝者 :　{winnerString}\r\n                </div> \r\n                <div className={classes.buttonContainer}>\r\n                    {prevKifuButton}\r\n                    {nextKifuButton}\r\n                </div>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={button1String}\r\n                            onClick={() => start()}\r\n                >\r\n                    再戦\r\n                </Button>\r\n                <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            className={button1String}\r\n                            onClick={() => quickStart()}\r\n                >\r\n                    クイックスタート\r\n                </Button>\r\n            </div>\r\n        )\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default Params;","import * as React from 'react';\r\nimport Accordion from '@mui/material/Accordion';\r\nimport AccordionSummary from '@mui/material/AccordionSummary';\r\nimport AccordionDetails from '@mui/material/AccordionDetails';\r\nimport Typography from '@mui/material/Typography';\r\nimport { makeStyles } from '@mui/styles';\r\nimport useMedia from 'use-media';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        height: 428,\r\n        overflowX: \"scroll\",\r\n        overflowY: \"scroll\",\r\n    },\r\n    containerM: {\r\n        height: 324,\r\n        overflowX: \"scroll\",\r\n        overflowY: \"scroll\",\r\n    },\r\n    type: {\r\n        display: \"flex\",\r\n        flexWrap: \"nowrap\",\r\n\t    // justifyContent: \"unset\",\r\n\t    justifyContent: \"center\",\r\n    },\r\n    images: {\r\n        height: 170,\r\n        minWidth: 170,\r\n        backgroundSize: \"contain\",\r\n    },\r\n    contents: {\r\n    },\r\n  }));\r\nconst Rule = () => {\r\n    const classes = useStyles();\r\n    const isWide = useMedia({minWidth: '769px'});\r\n    let containerString = \"\";\r\n    if(isWide) {\r\n        containerString = `${classes.container}`;\r\n    } else {\r\n        containerString = `${classes.containerM}`;\r\n    }\r\n    return(\r\n        <div className={containerString}>\r\n            <Accordion>\r\n                <AccordionSummary\r\n                    aria-controls=\"panel1a-content\"\r\n                    id=\"panel1a-header\"\r\n                >\r\n                    <Typography>駒の動き</Typography>\r\n                </AccordionSummary>\r\n                <AccordionDetails>\r\n                    <Typography>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move00-1.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move01-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move01-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move02-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move02-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move03-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move03-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move04-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move04-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move05-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move05-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move06-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move06-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move07-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move07-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move08-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move08-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move09-1.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move10-1.png)`}}></div>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move10-2.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move11-1.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move12-1.png)`}}></div>\r\n                        </div>\r\n                        <div className={classes.type}>\r\n                            <div className={classes.images} style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/move13-1.png)`}}></div>\r\n                        </div>\r\n                    </Typography>\r\n                </AccordionDetails>\r\n            </Accordion>\r\n            <Accordion className={classes.accoContainer}>\r\n                <AccordionSummary\r\n                    aria-controls=\"panel1a-content\"\r\n                    id=\"panel1a-header\"\r\n                >\r\n                    <Typography>ルール</Typography>\r\n                </AccordionSummary>\r\n                <AccordionDetails className={classes.contents}>\r\n                    <Typography>\r\n                    1.互いに駒を動かし師を取った(詰んだ)方の勝利。\r\n                    <br />\r\n                    <br />\r\n                    2.ゲーム開始時に他のルールに触れない形であれば自分の陣地(手前3段)内で自由に駒を配置することができる。\r\n                    <br />\r\n                    <br />\r\n                    3.白駒から配置を始める。駒配置時は師を最初に配置し、残りを交互に配置していく。\r\n                    <br />\r\n                    <br />\r\n                    4.全ての駒を配置せずに開始することもできる。全ての駒を配置しない場合は配置終了の合図として「済み」と言わなければならない。\r\n                    配置しなかった駒は手駒として手元に残る。\r\n                    一方が「済み」を宣言した場合も、もう一方は最後まで配置することができる。\r\n                    全ての駒を配置し終えたら、白駒が先行でゲームを開始するが、黒駒が「済み」を宣言したあとに白駒が配置を続けた場合、黒駒が先行になる。\r\n                    <br />\r\n                    <br />\r\n                    5.駒を取られた場合、その駒は二度と盤上には戻ってこれない。手駒はいつでも盤上に置くことができるが、自分の陣地内にしか置けない。\r\n                    <br />\r\n                    <br />\r\n                    6.駒は3つまで重ねることができる。駒を重ねた場合下の駒は上の駒を無くさない限り動かすことはできない。\r\n                    <br />\r\n                    <br />\r\n                    7.駒を重ねることで得られる効果は以下の通りである。\r\n                    　2,3段重ね・上に重ねた駒の行動範囲を広げることができる。また、同じ段以上の駒からしか攻撃を受けない(師、砲、筒は除く)。\r\n                    <br />\r\n                    <br />\r\n                    8.相手の駒を取らずにその駒に自分の駒を重ねる（ツケる）ことができる。ただし、相手自分の共に師、砲、筒の上に駒を重ねることはできず、また、手駒を置く時に相手の駒の上に直接置くこともできない。\r\n                    <br />\r\n                    大将や槍など2マス以上移動できる駒は移動途中にある駒を飛び越えて移動することはできない。\r\n                    ただし砲と筒の前方移動や弓は飛び越えて移動できる。\r\n                    </Typography>\r\n                </AccordionDetails>\r\n            </Accordion>\r\n            <Accordion>\r\n                <AccordionSummary\r\n                    aria-controls=\"panel1a-content\"\r\n                    id=\"panel1a-header\"\r\n                >\r\n                    <Typography>特殊駒</Typography>\r\n                </AccordionSummary>\r\n                <AccordionDetails>\r\n                    <Typography>\r\n                    帥(スイ）\r\n                    <br />\r\n                    ツケることもツケられることもできないが二弾三段の敵コマを下段ごと取ることができる\r\n                    <br />\r\n                    <br />\r\n                    砲（オオヅツ）筒（ツツ）\r\n                    <br />\r\n                    ツケることができないが二弾三段の敵コマを下段ごと取ることができる\r\n                    <br />\r\n                    <br />\r\n                    砦(トリデ)\r\n                    <br />\r\n                    敵をとることができない\r\n                    <br />\r\n                    <br />\r\n                    謀（サンボウ）\r\n                    <br />\r\n                    この駒がある段まで新できる範囲を広げられる（謀がなくても手前3段は新できる）\r\n                    謀は手前1段にしか新できない\r\n                    </Typography>\r\n                </AccordionDetails>\r\n            </Accordion>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Rule","import React, {useState, createContext, useEffect} from 'react'\nimport './assets/styles/style.css'\nimport { GameScreen } from \"./components/index.js\";\nimport { createTheme } from '@mui/material/styles'\n\nexport const PieceContext = createContext();\nexport const ThemeContext = createContext();\n\nconst App = () => {\n  const initPieces = new Array(89).fill({type: -1, whose: 0, level: 0});\n  let initWhitePieces = new Array(25 - 3);\n  for (let i = 0; i < 14; i++) {\n    initWhitePieces[i] = i;\n  }\n  for (let i = 3; i < 11; i++) {\n    initWhitePieces[i + 14 - 3] = i;\n  }\n  initWhitePieces.push(4);\n  initWhitePieces.push(4);\n  initWhitePieces.push(10);\n  initWhitePieces.sort(function(a, b) {\n    return a - b;\n  });\n\n  let initBlackPieces = new Array(25 - 3);\n  for (let i = 0; i < 14; i++) {\n    initBlackPieces[i] = i;\n  }\n  for (let i = 3; i < 11; i++) {\n    initBlackPieces[i + 14 - 3] = i;\n  }\n  initBlackPieces.push(4);\n  initBlackPieces.push(4);\n  initBlackPieces.push(10);\n  initBlackPieces.sort(function(a, b) {\n    return b - a;\n  });\n\n  const [ pieces, setPieces ] = useState(initPieces);\n  const [ turn, setTurn ] = useState(1);\n  const [ select, setSelect ] = useState({num: -1, type: -1, level: 0});\n  const [ clickFlag, setClickFlag ] = useState(false);\n  const [ canMove, setCanMove ] = useState([]);\n  const [ modal, setModal ] = useState(0);\n  const [ attack, setAttack ] = useState({num: 0, offense: -1, defense: -1});\n  const [ whitePieces, setWhitePieces ] = useState(initWhitePieces);\n  const [ blackPieces, setBlackPieces ] = useState(initBlackPieces);\n  const [ phase, setPhase ] = useState(0);\n  const [ winner, setWinner ] = useState(0);\n  const [ kifu, setKifu ] = useState([]);\n  const [ yomifu, setYomifu ] = useState(\"\");\n  const [ click, setClick ] = useState([{num: -1, type: -1, level: 0}]);\n  const [ firstArata, setFirstArata ] = useState(false);\n  const [ bouCheck, setBouCheck ] = useState([-1, -1]);\n  const [ curKifu, setCurKifu ] = useState(-1);\n  const [ ruleBook, setRuleBook ] = useState(false);\n  \n  const theme = createTheme({\n    palette: {\n        primary: {\n            main: '#283593',\n        },\n        secondary: {\n            main: '#e53935',\n        },\n    }\n  });\n\n  return(\n    <div>\n      <PieceContext.Provider value={{pieces, setPieces, turn, setTurn, select, setSelect, clickFlag, setClickFlag, canMove, setCanMove, modal, setModal, attack, setAttack, whitePieces, setWhitePieces, blackPieces, setBlackPieces, phase, setPhase, winner, setWinner, kifu, setKifu,  yomifu, setYomifu, click, setClick, firstArata, setFirstArata, bouCheck, setBouCheck, curKifu, setCurKifu, ruleBook, setRuleBook}}>\n        <ThemeContext.Provider theme={theme}>\n          <GameScreen />\n        </ThemeContext.Provider>\n      </PieceContext.Provider>\n    </div>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}